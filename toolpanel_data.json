{"buttons":[{"name":"X","type":"folder","children":[{"name":"X詳細検索","type":"button","js":"javascript:/* MULTIGEN_METADATA: [{\"type\":\"javascript\",\"fileName\":\"x-search-panel\",\"position\":{\"yProp\":\"top\",\"yVal\":\"10\",\"xProp\":\"left\",\"xVal\":\"10\"}},{\"type\":\"userscript_button\",\"fileName\":\"Phone_X_toolpanel.user\",\"position\":{\"yProp\":\"bottom\",\"yVal\":\"10\",\"xProp\":\"right\",\"xVal\":\"10\"},\"name\":\"Phone_X_toolpanel.user\",\"version\":\"1.6\",\"downloadURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/Phone_X_toolpanel.user.js\",\"updateURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/Phone_X_toolpanel.user.js\",\"urls\":[{\"type\":\"match\",\"url\":\"https://x.com/*\"}],\"mode\":\"button\",\"button\":{\"displayMode\":\"fixed\",\"display\":{\"top\":\"15\",\"left\":\"50\",\"bottom\":\"35\",\"right\":\"70\"},\"cursor\":{\"top\":\"0\",\"left\":\"0\",\"bottom\":\"30\",\"right\":\"30\"},\"contentType\":\"default\"}},{\"type\":\"toolpanel_button\",\"fileName\":\"pctool.user\",\"position\":{\"yProp\":\"top\",\"yVal\":\"10\",\"xProp\":\"left\",\"xVal\":\"10\"},\"name\":\"pctool.user\",\"version\":\"1.1.33\",\"downloadURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pctool.user.js\",\"updateURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pctool.user.js\",\"urls\":[{\"type\":\"match\",\"url\":\"http*://*\\/*\"}],\"mode\":\"button\",\"button\":{\"displayMode\":\"transparent\",\"display\":{\"top\":\"0\",\"left\":\"0\",\"bottom\":\"30\",\"right\":\"30\"},\"cursor\":{\"top\":\"0\",\"left\":\"0\",\"bottom\":\"30\",\"right\":\"30\"},\"contentType\":\"default\"},\"buttonName\":\"リスト付きX詳細検索\"}] */\n(function(){if(document.getElementById('x-search-panel-container')){document.getElementById('x-search-panel-container').remove();return}const panelData={\"lists\":[{\"listName\":\"チェック\",\"accounts\":[{\"displayName\":\"いけこう\",\"username\":\"evjfeulgs1121\"},{\"displayName\":\"ふさふさ\",\"username\":\"Hage6741\"},{\"displayName\":\"ゆんゆん\",\"username\":\"ILove_Galaxy\"},{\"displayName\":\"ゆきっち\",\"username\":\"yukicchi_world\"},{\"displayName\":\"あおと\",\"username\":\"aoto_sumaho\"},{\"displayName\":\"ENJUMARU\",\"username\":\"En__usagi\"},{\"displayName\":\"じぇお\",\"username\":\"dgetmobile\"},{\"displayName\":\"吉田製作所\",\"username\":\"netatank\"},{\"displayName\":\"次元を超えし者\",\"username\":\"dim_lurker\"}]},{\"listName\":\"Samsung\",\"accounts\":[{\"displayName\":\"Nullpo\",\"username\":\"Nullpo_x3100\"},{\"displayName\":\"ねみぃ\",\"username\":\"nemy_new\"},{\"displayName\":\"Sam\",\"username\":\"MBH_N49\"},{\"displayName\":\"カロン\",\"username\":\"karon_pad\"},{\"displayName\":\"あほぴた\",\"username\":\"_TadaHima_\"},{\"displayName\":\"RoketLake-Sおじさん\",\"username\":\"3950x\"},{\"displayName\":\"しばもん\",\"username\":\"monsivamon\"}]},{\"listName\":\"海外\",\"accounts\":[{\"displayName\":\"Anthony\",\"username\":\"TheGalox_\"},{\"displayName\":\"CID\",\"username\":\"CIDSAMSUNG57805\"},{\"displayName\":\"Into Galaxy\",\"username\":\"IntoGalaxyy\"},{\"displayName\":\"Holly - I like tech\",\"username\":\"AnxiousHolly\"},{\"displayName\":\"álen söny (소니 알렌)\",\"username\":\"choehau_alen\"},{\"displayName\":\"Noah Cat\",\"username\":\"Cartidise\"},{\"displayName\":\"Alvin\",\"username\":\"sondesix\"},{\"displayName\":\"NMPS\",\"username\":\"FamilyTaes\"},{\"displayName\":\"Galaxy AI\",\"username\":\"GalaxyyAI\"},{\"displayName\":\"Apple Mis-Intelligence\",\"username\":\"apple_inte\"},{\"displayName\":\"Pixel Gamer 4k\",\"username\":\"4k_isn\"},{\"displayName\":\"Def64Gamer\",\"username\":\"Def64Gamer\"}]},{\"listName\":\"ガジェット有識者\",\"accounts\":[{\"displayName\":\"IceUniverse\",\"username\":\"UniverseIce\"},{\"displayName\":\"ピュアセル\",\"username\":\"ML_Autofocus\"},{\"displayName\":\"nakajimegame\",\"username\":\"nakajimegame\"},{\"displayName\":\"ASUS好きのZenBlog\",\"username\":\"ASUS_ZenBlog\"},{\"displayName\":\"すまほん\",\"username\":\"sm_hn\"},{\"displayName\":\"はやぽん\",\"username\":\"Hayaponlog\"},{\"displayName\":\"Tovi\",\"username\":\"ToviWorks\"},{\"displayName\":\"モバイルドットコム\",\"username\":\"chehonz201\"}]},{\"listName\":\"IT有識者\",\"accounts\":[{\"displayName\":\"Kdroidwin\",\"username\":\"Kdroidwin1\"},{\"displayName\":\"ChatGPT研究所\",\"username\":\"ctgptlb\"},{\"displayName\":\"ぷらぐら\",\"username\":\"YukkuriAIch\"}]},{\"listName\":\"Apple信者\",\"accounts\":[{\"displayName\":\"Sassy\",\"username\":\"GoApFaAmMi\"},{\"displayName\":\"水麻呂\",\"username\":\"mizumaro_gadget\"},{\"displayName\":\"うすしお\",\"username\":\"utthi_sub\"},{\"displayName\":\"はむさんど\",\"username\":\"hamu_3nd\"},{\"displayName\":\"Nao\",\"username\":\"Nao_9615\"},{\"displayName\":\"なー\",\"username\":\"remonsawa_umai\"}]},{\"listName\":\"不穏分子\",\"accounts\":[{\"displayName\":\"kai\",\"username\":\"snapdragon_kai\"},{\"displayName\":\"KAI\",\"username\":\"KAI90985198\"}]}],\"shortcuts\":[{\"shortcutName\":\"Samsung\",\"searchMethod\":\"OR\",\"keyword1\":\"galaxy\",\"keyword2\":\"one ui\",\"keyword3\":\"samsung\"},{\"shortcutName\":\"Android iOS\",\"searchMethod\":\"AND\",\"keyword1\":\"android\",\"keyword2\":\"ios\"}]};const panelCSS=`:root{--bg:#e6f0ff;--text:#003366;--border:#99c2ff;--input-bg:#f0f0f0;--input-text:#000;--btn-bg:#4da6ff;--btn-text:#fff;--accent-bg:#1a75ff;--accent-text:#fff;--list-bg:#d4e4ff;}@media (prefers-color-scheme:dark){:root{--bg:#1a3d66;--text:#e6f0ff;--border:#4d79b3;--input-bg:#333;--input-text:#fff;--btn-bg:#1a75ff;--list-bg:#254d80;}}#x-search-panel-container{color:var(--text);background-color:var(--bg);position:fixed;top: 10px; left: 10px;border:1px solid var(--border);border-radius:8px;padding:10px;z-index:9999;font-size:12px;width:90%;max-width:380px;box-shadow:0 4px 12px rgba(0,0,0,.25);box-sizing:border-box;font-family:sans-serif}.x-panel-screen{display:none}.x-panel-screen.active{display:block}.x-panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;border-bottom:1px solid var(--border);padding-bottom:5px}.x-panel-header .x-panel-title-container{display:flex;align-items:center;gap:8px}#x-panel-settings-btn{color:var(--text);background:0;border:0;font-size:20px;cursor:pointer;padding:0;line-height:1}.x-panel-header h3{margin:0}.x-panel-lists-container{display:flex;overflow-x:auto;padding-bottom:8px;margin-bottom:8px;gap:12px}.x-panel-list{flex:0 0 31%;min-width:90px}.x-panel-list h4{margin:0 0 4px 0;font-size:13px}.x-panel-users,.x-panel-shortcuts{max-height:120px;overflow-y:auto;border:1px solid var(--border);background-color:var(--list-bg);padding:5px;border-radius:4px}.x-panel-user label,.x-panel-shortcut label{display:block;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.x-panel-footer{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}.x-panel-footer button{flex-grow:1;padding:6px;border:1px solid var(--border);background:var(--btn-bg);color:var(--btn-text);border-radius:4px;cursor:pointer;font-size:11px}.x-panel-close-btn,.x-panel-back-btn{color:var(--text);background:0;border:0;font-size:18px;cursor:pointer;padding:0 5px}.x-panel-fromto-group label{display:block;font-size:12px}hr{border-color:var(--border);border-style:solid;border-width:1px 0 0 0}.x-search-form-wrapper{max-height:300px;overflow-y:auto;padding-right:8px;margin-top:8px}.x-search-form div{margin-bottom:6px}.x-search-form label{font-weight:700;margin-bottom:2px;font-size:11px;display:block}#x-search-form input,#x-search-form select,#x-search-form textarea{color:var(--input-text)!important;background-color:var(--input-bg)!important;width:95%;padding:5px;border:1px solid var(--border);border-radius:4px;font-size:12px}.checkbox-group{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:10px}.checkbox-group label{justify-content:flex-start}.checkbox-group input[type=checkbox]{width:auto!important}#x-search-form-final-btn{width:100%;padding:8px;background:var(--accent-bg);color:var(--accent-text);border:0;font-size:14px;font-weight:700;margin-top:5px}`;/* ... (The rest of the original panel's JS logic remains unchanged) ... */const panelContainer=document.createElement('div');panelContainer.id='x-search-panel-container';panelContainer.innerHTML=`<style>${panelCSS}</style><div id=\"list-screen\" class=\"x-panel-screen active\"><div class=\"x-panel-header\"><div class=\"x-panel-title-container\"><button id=\"x-panel-settings-btn\">⚙️</button><h3>リスト</h3></div><button class=\"x-panel-close-btn\">☒</button></div><div class=\"x-panel-lists-container\">${panelData.lists.map(list=>`<div class=\"x-panel-list\"><h4>${list.listName}</h4><div class=\"x-panel-users\">${list.accounts.map(acc=>`<div class=\"x-panel-user\"><label><input type=\"checkbox\" name=\"user-select\" value=\"${acc.username}\"> ${acc.displayName}</label></div>`).join('')}</div></div>`).join('')}</div><div class=\"x-panel-fromto-group\"><label><input type=\"radio\" name=\"from-to-mode\" value=\"from\" id=\"radio-from\"> from:</label><label><input type=\"radio\" name=\"from-to-mode\" value=\"to\" id=\"radio-to\"> to:</label><label><input type=\"radio\" name=\"from-to-mode\" value=\"from_to\" id=\"radio-from_to\"> from:↔to:</label><span id=\"from-to-display\"></span></div><hr style=\"margin:8px 0\"><h4>ショートカット</h4><div class=\"x-panel-shortcuts\">${panelData.shortcuts.map(sc=>`<div class=\"x-panel-shortcut\"><label><input type=\"radio\" name=\"shortcut-select\" value=\"${sc.shortcutName}\"> ${sc.shortcutName}</label></div>`).join('')}</div><div class=\"x-panel-footer\"><button type=\"button\" id=\"profile-btn\">プロフへ</button><button type=\"button\" id=\"copy-user-btn\">垢名コピー</button><button type=\"button\" id=\"copy-all-btn\">垢名抽出</button><button type=\"button\" id=\"show-advanced-search-btn\" style=\"background:var(--accent-bg);color:var(--accent-text);font-weight:700\">詳細検索へ</button></div></div><div id=\"advanced-search-screen\" class=\"x-panel-screen\"><div class=\"x-panel-header\"><button class=\"x-panel-back-btn\" type=\"button\">←戻る</button><h3>詳細検索</h3></div><form id=\"x-search-form\" onsubmit=\"return false\"><div class=\"x-search-form-wrapper\"><div><label>ユーザー名:</label><input type=\"text\" id=\"final-user\"></div><div><label>from:</label><input type=\"text\" id=\"final-from\"></div><div><label>to:</label><input type=\"text\" id=\"final-to\"></div><div><label>検索方法:</label><select id=\"final-searchMethod\"><option value=\"\">選択しない</option><option value=\"AND\">AND</option><option value=\"OR\">OR</option></select></div><div><label>キーワード:</label><input type=\"text\" id=\"final-keyword1\"><input type=\"text\" id=\"final-keyword2\" style=\"margin-top:2px\"><input type=\"text\" id=\"final-keyword3\" style=\"margin-top:2px\"></div><div><label>完全に一致:</label><input type=\"text\" id=\"final-exactPhrase\"></div><div><label>除外ワード:</label><input type=\"text\" id=\"final-exclude1\"><input type=\"text\" id=\"final-exclude2\" style=\"margin-top:2px\"><input type=\"text\" id=\"final-exclude3\" style=\"margin-top:2px\"></div><div><label>いつから:</label><input type=\"date\" id=\"final-since\"></div><div><label>いつまで:</label><input type=\"date\" id=\"final-until\"></div><div><label>いいね数(以上):</label><input type=\"number\" id=\"final-minFaves\"></div><div><label>リプライ数(以上):</label><input type=\"number\" id=\"final-minReplies\"></div><div><label>リツイート数(以上):</label><input type=\"number\" id=\"final-minRetweets\"></div><div><label>言語:</label><select id=\"final-lang\"><option value=\"\">指定なし</option><option value=\"ja\">日本語</option><option value=\"en\">英語</option></select></div><div class=\"checkbox-group\"><label><input type=\"checkbox\" id=\"final-imagesOnly\">画像のみ</label><label><input type=\"checkbox\" id=\"final-videosOnly\">動画のみ</label><label><input type=\"checkbox\" id=\"final-followerOnly\">フォロワーのみ</label><label><input type=\"checkbox\" id=\"final-excludeLang\">指定言語を除外</label></div></div><button type=\"button\" id=\"x-search-form-final-btn\">検索</button></form></div>`;document.body.appendChild(panelContainer);const q=s=>panelContainer.querySelector(s),qAll=s=>panelContainer.querySelectorAll(s);const switchScreen=id=>{qAll('.x-panel-screen').forEach(s=>s.classList.remove('active'));q(`#${id}`).classList.add('active')};q('.x-panel-close-btn').onclick=()=>panelContainer.remove();q('.x-panel-back-btn').onclick=()=>switchScreen('list-screen');q('#x-panel-settings-btn').onclick=()=>window.open('https://gadget-otaku.github.io/Bookmarklet/HTML%E5%88%B6%E4%BD%9C/X%20%E8%A9%B3%E7%B4%B0%E6%A4%9C%E7%B4%A2%E3%83%91%E3%83%8D%E3%83%AB%20%E3%82%B8%E3%82%A7%E3%83%8D%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%20(%E5%A4%9A%E6%A9%9F%E8%83%BD%E7%B5%B1%E5%90%88%E7%89%88).html','_blank');const displaySpan=q('#from-to-display'),updateFromToDisplay=()=>{const mode=q('input[name=\"from-to-mode\"]:checked')?.value,selected=Array.from(qAll('input[name=\"user-select\"]:checked'));displaySpan.innerHTML='';displaySpan.dataset.from='';displaySpan.dataset.to='';if(!mode)return;if((mode==='from'||mode==='to')&&selected.length>1){alert('from:かto:はユーザー1人のみ選択可能です。');q('input[name=\"from-to-mode\"]:checked').checked=false;return}if(mode==='from_to'){if(selected.length!==2){alert('from: to: はユーザー2人の選択が必要です。');q('input[name=\"from-to-mode\"]:checked').checked=false;return}const users=selected.map(cb=>cb.value);displaySpan.dataset.from=users[0];displaySpan.dataset.to=users[1];displaySpan.innerHTML=` from:${users[0]} <button type=\"button\" id=\"swap-users-btn\" style=\"border:0;background:0;cursor:pointer;color:var(--text)\">↔</button> to:${users[1]}`}};qAll('input[name=\"user-select\"]').forEach(cb=>cb.onchange=()=>{if(Array.from(qAll('input[name=\"user-select\"]:checked')).length>2){alert('ユーザーは2人までです');cb.checked=false}updateFromToDisplay()});let lastCheckedFromTo='radio-from';q('#radio-from').checked=true;qAll('input[name=\"from-to-mode\"]').forEach(radio=>radio.addEventListener('click',e=>{if(e.target.id===lastCheckedFromTo&&e.target.checked){e.target.checked=false;lastCheckedFromTo=null}else{lastCheckedFromTo=e.target.id}updateFromToDisplay()}));displaySpan.onclick=e=>{if(e.target.id==='swap-users-btn'){const from=displaySpan.dataset.from,to=displaySpan.dataset.to;displaySpan.dataset.from=to;displaySpan.dataset.to=from;displaySpan.innerHTML=` from:${to} <button type=\"button\" id=\"swap-users-btn\" style=\"border:0;background:0;cursor:pointer;color:var(--text)\">↔</button> to:${from}`}};q('#profile-btn').onclick=()=>{const s=Array.from(qAll('input[name=\"user-select\"]:checked'));if(s.length!==1)return alert('ユーザーを1人選択してください');location.href=`https://x.com/${s[0].value}`};q('#copy-user-btn').onclick=()=>{const s=Array.from(qAll('input[name=\"user-select\"]:checked'));if(s.length!==1)return alert('ユーザーを1人選択してください');navigator.clipboard.writeText(s[0].value).then(()=>alert('コピー: '+s[0].value))};q('#copy-all-btn').onclick=()=>{const currentUrl=window.location.href;const match=currentUrl.match(/https:\\/\\/x\\.com\\/([^\\/]+)/);if(!match||!match[1])return alert('このページからユーザー名を抽出できません');const username=match[1];navigator.clipboard.writeText(username).then(()=>alert('ユーザー名をコピーしました: '+username))};q('#show-advanced-search-btn').onclick=()=>{q('#x-search-form').reset();let p={};const scName=q('input[name=\"shortcut-select\"]:checked')?.value;if(scName)p={...(panelData.shortcuts.find(sc=>sc.shortcutName===scName)||{})};const ftMode=q('input[name=\"from-to-mode\"]:checked')?.value,selUsers=Array.from(qAll('input[name=\"user-select\"]:checked')).map(cb=>cb.value);if(ftMode){delete p.user;delete p.fromUser;delete p.toUser;if(ftMode==='from'&&selUsers.length===1)p.fromUser=selUsers[0];if(ftMode==='to'&&selUsers.length===1)p.toUser=selUsers[0];if(ftMode==='from_to'&&selUsers.length===2){p.fromUser=displaySpan.dataset.from;p.toUser=displaySpan.dataset.to}}else if(selUsers.length===1)p.user=selUsers[0];else if(selUsers.length>1)return alert('ユーザー2人選択時は from/to を指定してください');const setVal=(id,val)=>{const e=q(`#final-${id}`);if(e)e.value=val||''};const setCheck=(id,val)=>{const e=q(`#final-${id}`);if(e)e.checked=!!val};setVal('user',p.user);setVal('from',p.fromUser);setVal('to',p.toUser);setVal('searchMethod',p.searchMethod);setVal('keyword1',p.keyword1);setVal('keyword2',p.keyword2);setVal('keyword3',p.keyword3);setVal('exactPhrase',p.exactPhrase);setVal('exclude1',p.exclude1);setVal('exclude2',p.exclude2);setVal('exclude3',p.exclude3);setVal('since',p.since);setVal('until',p.until);setVal('minFaves',p.minFaves);setVal('minReplies',p.minReplies);setVal('minRetweets',p.minRetweets);setVal('lang',p.lang);setCheck('imagesOnly',p.imagesOnly);setCheck('videosOnly',p.videosOnly);setCheck('followerOnly',p.followerOnly);setCheck('excludeLang',p.excludeLang);switchScreen('advanced-search-screen')};q('#x-search-form-final-btn').onclick=()=>{const v=id=>q(`#final-${id}`).value,c=id=>q(`#final-${id}`).checked,parts=[];const user=v('user'),from=v('from'),to=v('to');if(user&&(from||to))return alert('ユーザー名とfrom/toは同時に使用できません');if(user)parts.push(encodeURIComponent(user));if(from)parts.push(`from:${from}`);if(to)parts.push(`to:${to}`);const kws=[v('keyword1'),v('keyword2'),v('keyword3')].filter(Boolean);if(kws.length>0)parts.push(`(${kws.map(k=>`\"${k}\"`).join(` ${v('searchMethod')||' '} `)})`);if(v('exactPhrase'))parts.push(`\"${v('exactPhrase')}\"`);[v('exclude1'),v('exclude2'),v('exclude3')].filter(Boolean).forEach(ex=>parts.push(`-${ex}`));if(v('since'))parts.push(`since:${v('since')}`);if(v('until'))parts.push(`until:${v('until')}`);if(v('minFaves'))parts.push(`min_faves:${v('minFaves')}`);if(v('minReplies'))parts.push(`min_replies:${v('minReplies')}`);if(v('minRetweets'))parts.push(`min_retweets:${v('minRetweets')}`);if(c('imagesOnly'))parts.push('filter:images');if(c('videosOnly'))parts.push('filter:videos');if(c('followerOnly'))parts.push('filter:follows');if(v('lang'))parts.push(`${c('excludeLang')?'-':''}lang:${v('lang')}`);location.href=`https://x.com/search?q=${encodeURIComponent(parts.join(' '))}&src=typed_query`};})()"},{"name":"仮","type":"button","js":"javascript:(function(){\n if (window._bmUI3) return;\n window._bmUI3 = true;\n \n const style = `\n #bm3-generator {\n position: fixed;\n top: 20px;\n left: 20px;\n background: white;\n border: 1px solid #ccc;\n padding: 10px;\n z-index: 99999;\n font-family: sans-serif;\n box-shadow: 2px 2px 10px rgba(0,0,0,0.2);\n }\n #bm3-generator input {\n width: 300px;\n padding: 5px;\n margin: 5px 0;\n }\n #bm3-generator button {\n padding: 5px 10px;\n margin-right: 5px;\n }\n #bm3-close {\n position: absolute;\n top: 5px;\n right: 5px;\n cursor: pointer;\n font-weight: bold;\n }\n `;\n \n const html = `\n <div id=\"bm3-generator\">\n <div id=\"bm3-close\">☒</div>\n <input id=\"bm3-text\" type=\"text\" placeholder=\"指定文言 入力欄\" />\n <br/>\n <button id=\"bm3-copy\">コピー</button>\n </div>\n `;\n \n const styleTag = document.createElement('style');\n styleTag.textContent = style;\n document.head.appendChild(styleTag);\n \n const container = document.createElement('div');\n container.innerHTML = html;\n document.body.appendChild(container);\n \n document.getElementById('bm3-close').onclick = () => {\n container.remove();\n styleTag.remove();\n delete window._bmUI3;\n };\n \n document.getElementById('bm3-copy').onclick = () => {\n const text = document.getElementById('bm3-text').value;\n if (!text) return alert(\"文言を入力してください\");\n \n const escaped = text.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\");\n const bookmarklet = `javascript:(function(){const t=document.createElement('textarea');t.value='${escaped}';document.body.appendChild(t);t.select();document.execCommand('copy');document.body.removeChild(t);})();`;\n \n const textarea = document.createElement('textarea');\n textarea.value = bookmarklet;\n document.body.appendChild(textarea);\n textarea.select();\n document.execCommand('copy');\n document.body.removeChild(textarea);\n alert(\"文言コピー用のブックマークレットをコピーしました\");\n };\n })();"},{"name":"仮2","type":"folder","children":[{"name":"仮3","type":"button","js":"javascript:window.location.href=\"https://www.youtube.com/@ThomasGadgemaga/videos\";"},{"name":"仮4","type":"folder","children":[{"name":"仮5","type":"folder","children":[{"name":"仮6","type":"button","js":"a"}]}]}],"isOpen":false}],"isOpen":true},{"name":"新しくタブを開くブックマークレット生成","type":"button","js":"javascript:(function(){\n if (window._bmUI) return;\n window._bmUI = true;\n \n const style = `\n #bm-generator {\n position: fixed;\n top: 20px;\n left: 20px;\n background: white;\n border: 1px solid #ccc;\n padding: 10px;\n z-index: 99999;\n font-family: sans-serif;\n box-shadow: 2px 2px 10px rgba(0,0,0,0.2);\n }\n #bm-generator input {\n width: 300px;\n padding: 5px;\n margin: 5px 0;\n }\n #bm-generator button {\n padding: 5px 10px;\n margin-right: 5px;\n }\n #bm-close {\n position: absolute;\n top: 5px;\n right: 5px;\n cursor: pointer;\n font-weight: bold;\n }\n `;\n \n const html = `\n <div id=\"bm-generator\">\n <div id=\"bm-close\">☒</div>\n <input id=\"bm-url\" type=\"text\" placeholder=\"URL 入力欄\" />\n <br/>\n <button id=\"bm-copy\">コピー</button>\n </div>\n `;\n \n const styleTag = document.createElement('style');\n styleTag.textContent = style;\n document.head.appendChild(styleTag);\n \n const container = document.createElement('div');\n container.innerHTML = html;\n document.body.appendChild(container);\n \n document.getElementById('bm-close').onclick = () => {\n container.remove();\n styleTag.remove();\n delete window._bmUI;\n };\n \n document.getElementById('bm-copy').onclick = () => {\n const url = document.getElementById('bm-url').value.trim();\n if (!url) return alert(\"URLを入力してください\");\n const bookmarklet = `javascript:(function(){window.open('${url.replace(/'/g, \"\\\\'\")}', '_blank');})();`;\n \n const textarea = document.createElement('textarea');\n textarea.value = bookmarklet;\n document.body.appendChild(textarea);\n textarea.select();\n document.execCommand('copy');\n document.body.removeChild(textarea);\n alert(\"ブックマークレットをコピーしました\");\n };\n })();"},{"name":"X","type":"folder","children":[{"name":"X詳細検索","type":"button","js":"javascript:/* MULTIGEN_METADATA: [{\"type\":\"javascript\",\"fileName\":\"x-search-panel\",\"position\":{\"yProp\":\"top\",\"yVal\":\"10\",\"xProp\":\"left\",\"xVal\":\"10\"}},{\"type\":\"userscript_button\",\"fileName\":\"Phone_X_toolpanel.user\",\"position\":{\"yProp\":\"bottom\",\"yVal\":\"10\",\"xProp\":\"right\",\"xVal\":\"10\"},\"name\":\"Phone_X_toolpanel.user\",\"version\":\"1.6\",\"downloadURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/Phone_X_toolpanel.user.js\",\"updateURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/Phone_X_toolpanel.user.js\",\"urls\":[{\"type\":\"match\",\"url\":\"https://x.com/*\"}],\"mode\":\"button\",\"button\":{\"displayMode\":\"fixed\",\"display\":{\"top\":\"15\",\"left\":\"50\",\"bottom\":\"35\",\"right\":\"70\"},\"cursor\":{\"top\":\"0\",\"left\":\"0\",\"bottom\":\"30\",\"right\":\"30\"},\"contentType\":\"default\"}},{\"type\":\"toolpanel_button\",\"fileName\":\"pctool.user\",\"position\":{\"yProp\":\"top\",\"yVal\":\"10\",\"xProp\":\"left\",\"xVal\":\"10\"},\"name\":\"pctool.user\",\"version\":\"1.1.33\",\"downloadURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pctool.user.js\",\"updateURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pctool.user.js\",\"urls\":[{\"type\":\"match\",\"url\":\"http*://*\\/*\"}],\"mode\":\"button\",\"button\":{\"displayMode\":\"transparent\",\"display\":{\"top\":\"0\",\"left\":\"0\",\"bottom\":\"30\",\"right\":\"30\"},\"cursor\":{\"top\":\"0\",\"left\":\"0\",\"bottom\":\"30\",\"right\":\"30\"},\"contentType\":\"default\"},\"buttonName\":\"リスト付きX詳細検索\"}] */\n(function(){if(document.getElementById('x-search-panel-container')){document.getElementById('x-search-panel-container').remove();return}const panelData={\"lists\":[{\"listName\":\"チェック\",\"accounts\":[{\"displayName\":\"いけこう\",\"username\":\"evjfeulgs1121\"},{\"displayName\":\"ふさふさ\",\"username\":\"Hage6741\"},{\"displayName\":\"ゆんゆん\",\"username\":\"ILove_Galaxy\"},{\"displayName\":\"ゆきっち\",\"username\":\"yukicchi_world\"},{\"displayName\":\"あおと\",\"username\":\"aoto_sumaho\"},{\"displayName\":\"ENJUMARU\",\"username\":\"En__usagi\"},{\"displayName\":\"じぇお\",\"username\":\"dgetmobile\"},{\"displayName\":\"吉田製作所\",\"username\":\"netatank\"},{\"displayName\":\"次元を超えし者\",\"username\":\"dim_lurker\"}]},{\"listName\":\"Samsung\",\"accounts\":[{\"displayName\":\"Nullpo\",\"username\":\"Nullpo_x3100\"},{\"displayName\":\"ねみぃ\",\"username\":\"nemy_new\"},{\"displayName\":\"Sam\",\"username\":\"MBH_N49\"},{\"displayName\":\"カロン\",\"username\":\"karon_pad\"},{\"displayName\":\"あほぴた\",\"username\":\"_TadaHima_\"},{\"displayName\":\"RoketLake-Sおじさん\",\"username\":\"3950x\"},{\"displayName\":\"しばもん\",\"username\":\"monsivamon\"}]},{\"listName\":\"海外\",\"accounts\":[{\"displayName\":\"Anthony\",\"username\":\"TheGalox_\"},{\"displayName\":\"CID\",\"username\":\"CIDSAMSUNG57805\"},{\"displayName\":\"Into Galaxy\",\"username\":\"IntoGalaxyy\"},{\"displayName\":\"Holly - I like tech\",\"username\":\"AnxiousHolly\"},{\"displayName\":\"álen söny (소니 알렌)\",\"username\":\"choehau_alen\"},{\"displayName\":\"Noah Cat\",\"username\":\"Cartidise\"},{\"displayName\":\"Alvin\",\"username\":\"sondesix\"},{\"displayName\":\"NMPS\",\"username\":\"FamilyTaes\"},{\"displayName\":\"Galaxy AI\",\"username\":\"GalaxyyAI\"},{\"displayName\":\"Apple Mis-Intelligence\",\"username\":\"apple_inte\"},{\"displayName\":\"Pixel Gamer 4k\",\"username\":\"4k_isn\"},{\"displayName\":\"Def64Gamer\",\"username\":\"Def64Gamer\"}]},{\"listName\":\"ガジェット有識者\",\"accounts\":[{\"displayName\":\"IceUniverse\",\"username\":\"UniverseIce\"},{\"displayName\":\"ピュアセル\",\"username\":\"ML_Autofocus\"},{\"displayName\":\"nakajimegame\",\"username\":\"nakajimegame\"},{\"displayName\":\"ASUS好きのZenBlog\",\"username\":\"ASUS_ZenBlog\"},{\"displayName\":\"すまほん\",\"username\":\"sm_hn\"},{\"displayName\":\"はやぽん\",\"username\":\"Hayaponlog\"},{\"displayName\":\"Tovi\",\"username\":\"ToviWorks\"},{\"displayName\":\"モバイルドットコム\",\"username\":\"chehonz201\"}]},{\"listName\":\"IT有識者\",\"accounts\":[{\"displayName\":\"Kdroidwin\",\"username\":\"Kdroidwin1\"},{\"displayName\":\"ChatGPT研究所\",\"username\":\"ctgptlb\"},{\"displayName\":\"ぷらぐら\",\"username\":\"YukkuriAIch\"}]},{\"listName\":\"Apple信者\",\"accounts\":[{\"displayName\":\"Sassy\",\"username\":\"GoApFaAmMi\"},{\"displayName\":\"水麻呂\",\"username\":\"mizumaro_gadget\"},{\"displayName\":\"うすしお\",\"username\":\"utthi_sub\"},{\"displayName\":\"はむさんど\",\"username\":\"hamu_3nd\"},{\"displayName\":\"Nao\",\"username\":\"Nao_9615\"},{\"displayName\":\"なー\",\"username\":\"remonsawa_umai\"}]},{\"listName\":\"不穏分子\",\"accounts\":[{\"displayName\":\"kai\",\"username\":\"snapdragon_kai\"},{\"displayName\":\"KAI\",\"username\":\"KAI90985198\"}]}],\"shortcuts\":[{\"shortcutName\":\"Samsung\",\"searchMethod\":\"OR\",\"keyword1\":\"galaxy\",\"keyword2\":\"one ui\",\"keyword3\":\"samsung\"},{\"shortcutName\":\"Android iOS\",\"searchMethod\":\"AND\",\"keyword1\":\"android\",\"keyword2\":\"ios\"}]};const panelCSS=`:root{--bg:#e6f0ff;--text:#003366;--border:#99c2ff;--input-bg:#f0f0f0;--input-text:#000;--btn-bg:#4da6ff;--btn-text:#fff;--accent-bg:#1a75ff;--accent-text:#fff;--list-bg:#d4e4ff;}@media (prefers-color-scheme:dark){:root{--bg:#1a3d66;--text:#e6f0ff;--border:#4d79b3;--input-bg:#333;--input-text:#fff;--btn-bg:#1a75ff;--list-bg:#254d80;}}#x-search-panel-container{color:var(--text);background-color:var(--bg);position:fixed;top: 10px; left: 10px;border:1px solid var(--border);border-radius:8px;padding:10px;z-index:9999;font-size:12px;width:90%;max-width:380px;box-shadow:0 4px 12px rgba(0,0,0,.25);box-sizing:border-box;font-family:sans-serif}.x-panel-screen{display:none}.x-panel-screen.active{display:block}.x-panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;border-bottom:1px solid var(--border);padding-bottom:5px}.x-panel-header .x-panel-title-container{display:flex;align-items:center;gap:8px}#x-panel-settings-btn{color:var(--text);background:0;border:0;font-size:20px;cursor:pointer;padding:0;line-height:1}.x-panel-header h3{margin:0}.x-panel-lists-container{display:flex;overflow-x:auto;padding-bottom:8px;margin-bottom:8px;gap:12px}.x-panel-list{flex:0 0 31%;min-width:90px}.x-panel-list h4{margin:0 0 4px 0;font-size:13px}.x-panel-users,.x-panel-shortcuts{max-height:120px;overflow-y:auto;border:1px solid var(--border);background-color:var(--list-bg);padding:5px;border-radius:4px}.x-panel-user label,.x-panel-shortcut label{display:block;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.x-panel-footer{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}.x-panel-footer button{flex-grow:1;padding:6px;border:1px solid var(--border);background:var(--btn-bg);color:var(--btn-text);border-radius:4px;cursor:pointer;font-size:11px}.x-panel-close-btn,.x-panel-back-btn{color:var(--text);background:0;border:0;font-size:18px;cursor:pointer;padding:0 5px}.x-panel-fromto-group label{display:block;font-size:12px}hr{border-color:var(--border);border-style:solid;border-width:1px 0 0 0}.x-search-form-wrapper{max-height:300px;overflow-y:auto;padding-right:8px;margin-top:8px}.x-search-form div{margin-bottom:6px}.x-search-form label{font-weight:700;margin-bottom:2px;font-size:11px;display:block}#x-search-form input,#x-search-form select,#x-search-form textarea{color:var(--input-text)!important;background-color:var(--input-bg)!important;width:95%;padding:5px;border:1px solid var(--border);border-radius:4px;font-size:12px}.checkbox-group{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:10px}.checkbox-group label{justify-content:flex-start}.checkbox-group input[type=checkbox]{width:auto!important}#x-search-form-final-btn{width:100%;padding:8px;background:var(--accent-bg);color:var(--accent-text);border:0;font-size:14px;font-weight:700;margin-top:5px}`;/* ... (The rest of the original panel's JS logic remains unchanged) ... */const panelContainer=document.createElement('div');panelContainer.id='x-search-panel-container';panelContainer.innerHTML=`<style>${panelCSS}</style><div id=\"list-screen\" class=\"x-panel-screen active\"><div class=\"x-panel-header\"><div class=\"x-panel-title-container\"><button id=\"x-panel-settings-btn\">⚙️</button><h3>リスト</h3></div><button class=\"x-panel-close-btn\">☒</button></div><div class=\"x-panel-lists-container\">${panelData.lists.map(list=>`<div class=\"x-panel-list\"><h4>${list.listName}</h4><div class=\"x-panel-users\">${list.accounts.map(acc=>`<div class=\"x-panel-user\"><label><input type=\"checkbox\" name=\"user-select\" value=\"${acc.username}\"> ${acc.displayName}</label></div>`).join('')}</div></div>`).join('')}</div><div class=\"x-panel-fromto-group\"><label><input type=\"radio\" name=\"from-to-mode\" value=\"from\" id=\"radio-from\"> from:</label><label><input type=\"radio\" name=\"from-to-mode\" value=\"to\" id=\"radio-to\"> to:</label><label><input type=\"radio\" name=\"from-to-mode\" value=\"from_to\" id=\"radio-from_to\"> from:↔to:</label><span id=\"from-to-display\"></span></div><hr style=\"margin:8px 0\"><h4>ショートカット</h4><div class=\"x-panel-shortcuts\">${panelData.shortcuts.map(sc=>`<div class=\"x-panel-shortcut\"><label><input type=\"radio\" name=\"shortcut-select\" value=\"${sc.shortcutName}\"> ${sc.shortcutName}</label></div>`).join('')}</div><div class=\"x-panel-footer\"><button type=\"button\" id=\"profile-btn\">プロフへ</button><button type=\"button\" id=\"copy-user-btn\">垢名コピー</button><button type=\"button\" id=\"copy-all-btn\">垢名抽出</button><button type=\"button\" id=\"show-advanced-search-btn\" style=\"background:var(--accent-bg);color:var(--accent-text);font-weight:700\">詳細検索へ</button></div></div><div id=\"advanced-search-screen\" class=\"x-panel-screen\"><div class=\"x-panel-header\"><button class=\"x-panel-back-btn\" type=\"button\">←戻る</button><h3>詳細検索</h3></div><form id=\"x-search-form\" onsubmit=\"return false\"><div class=\"x-search-form-wrapper\"><div><label>ユーザー名:</label><input type=\"text\" id=\"final-user\"></div><div><label>from:</label><input type=\"text\" id=\"final-from\"></div><div><label>to:</label><input type=\"text\" id=\"final-to\"></div><div><label>検索方法:</label><select id=\"final-searchMethod\"><option value=\"\">選択しない</option><option value=\"AND\">AND</option><option value=\"OR\">OR</option></select></div><div><label>キーワード:</label><input type=\"text\" id=\"final-keyword1\"><input type=\"text\" id=\"final-keyword2\" style=\"margin-top:2px\"><input type=\"text\" id=\"final-keyword3\" style=\"margin-top:2px\"></div><div><label>完全に一致:</label><input type=\"text\" id=\"final-exactPhrase\"></div><div><label>除外ワード:</label><input type=\"text\" id=\"final-exclude1\"><input type=\"text\" id=\"final-exclude2\" style=\"margin-top:2px\"><input type=\"text\" id=\"final-exclude3\" style=\"margin-top:2px\"></div><div><label>いつから:</label><input type=\"date\" id=\"final-since\"></div><div><label>いつまで:</label><input type=\"date\" id=\"final-until\"></div><div><label>いいね数(以上):</label><input type=\"number\" id=\"final-minFaves\"></div><div><label>リプライ数(以上):</label><input type=\"number\" id=\"final-minReplies\"></div><div><label>リツイート数(以上):</label><input type=\"number\" id=\"final-minRetweets\"></div><div><label>言語:</label><select id=\"final-lang\"><option value=\"\">指定なし</option><option value=\"ja\">日本語</option><option value=\"en\">英語</option></select></div><div class=\"checkbox-group\"><label><input type=\"checkbox\" id=\"final-imagesOnly\">画像のみ</label><label><input type=\"checkbox\" id=\"final-videosOnly\">動画のみ</label><label><input type=\"checkbox\" id=\"final-followerOnly\">フォロワーのみ</label><label><input type=\"checkbox\" id=\"final-excludeLang\">指定言語を除外</label></div></div><button type=\"button\" id=\"x-search-form-final-btn\">検索</button></form></div>`;document.body.appendChild(panelContainer);const q=s=>panelContainer.querySelector(s),qAll=s=>panelContainer.querySelectorAll(s);const switchScreen=id=>{qAll('.x-panel-screen').forEach(s=>s.classList.remove('active'));q(`#${id}`).classList.add('active')};q('.x-panel-close-btn').onclick=()=>panelContainer.remove();q('.x-panel-back-btn').onclick=()=>switchScreen('list-screen');q('#x-panel-settings-btn').onclick=()=>window.open('https://gadget-otaku.github.io/Bookmarklet/HTML%E5%88%B6%E4%BD%9C/X%20%E8%A9%B3%E7%B4%B0%E6%A4%9C%E7%B4%A2%E3%83%91%E3%83%8D%E3%83%AB%20%E3%82%B8%E3%82%A7%E3%83%8D%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%20(%E5%A4%9A%E6%A9%9F%E8%83%BD%E7%B5%B1%E5%90%88%E7%89%88).html','_blank');const displaySpan=q('#from-to-display'),updateFromToDisplay=()=>{const mode=q('input[name=\"from-to-mode\"]:checked')?.value,selected=Array.from(qAll('input[name=\"user-select\"]:checked'));displaySpan.innerHTML='';displaySpan.dataset.from='';displaySpan.dataset.to='';if(!mode)return;if((mode==='from'||mode==='to')&&selected.length>1){alert('from:かto:はユーザー1人のみ選択可能です。');q('input[name=\"from-to-mode\"]:checked').checked=false;return}if(mode==='from_to'){if(selected.length!==2){alert('from: to: はユーザー2人の選択が必要です。');q('input[name=\"from-to-mode\"]:checked').checked=false;return}const users=selected.map(cb=>cb.value);displaySpan.dataset.from=users[0];displaySpan.dataset.to=users[1];displaySpan.innerHTML=` from:${users[0]} <button type=\"button\" id=\"swap-users-btn\" style=\"border:0;background:0;cursor:pointer;color:var(--text)\">↔</button> to:${users[1]}`}};qAll('input[name=\"user-select\"]').forEach(cb=>cb.onchange=()=>{if(Array.from(qAll('input[name=\"user-select\"]:checked')).length>2){alert('ユーザーは2人までです');cb.checked=false}updateFromToDisplay()});let lastCheckedFromTo='radio-from';q('#radio-from').checked=true;qAll('input[name=\"from-to-mode\"]').forEach(radio=>radio.addEventListener('click',e=>{if(e.target.id===lastCheckedFromTo&&e.target.checked){e.target.checked=false;lastCheckedFromTo=null}else{lastCheckedFromTo=e.target.id}updateFromToDisplay()}));displaySpan.onclick=e=>{if(e.target.id==='swap-users-btn'){const from=displaySpan.dataset.from,to=displaySpan.dataset.to;displaySpan.dataset.from=to;displaySpan.dataset.to=from;displaySpan.innerHTML=` from:${to} <button type=\"button\" id=\"swap-users-btn\" style=\"border:0;background:0;cursor:pointer;color:var(--text)\">↔</button> to:${from}`}};q('#profile-btn').onclick=()=>{const s=Array.from(qAll('input[name=\"user-select\"]:checked'));if(s.length!==1)return alert('ユーザーを1人選択してください');location.href=`https://x.com/${s[0].value}`};q('#copy-user-btn').onclick=()=>{const s=Array.from(qAll('input[name=\"user-select\"]:checked'));if(s.length!==1)return alert('ユーザーを1人選択してください');navigator.clipboard.writeText(s[0].value).then(()=>alert('コピー: '+s[0].value))};q('#copy-all-btn').onclick=()=>{const currentUrl=window.location.href;const match=currentUrl.match(/https:\\/\\/x\\.com\\/([^\\/]+)/);if(!match||!match[1])return alert('このページからユーザー名を抽出できません');const username=match[1];navigator.clipboard.writeText(username).then(()=>alert('ユーザー名をコピーしました: '+username))};q('#show-advanced-search-btn').onclick=()=>{q('#x-search-form').reset();let p={};const scName=q('input[name=\"shortcut-select\"]:checked')?.value;if(scName)p={...(panelData.shortcuts.find(sc=>sc.shortcutName===scName)||{})};const ftMode=q('input[name=\"from-to-mode\"]:checked')?.value,selUsers=Array.from(qAll('input[name=\"user-select\"]:checked')).map(cb=>cb.value);if(ftMode){delete p.user;delete p.fromUser;delete p.toUser;if(ftMode==='from'&&selUsers.length===1)p.fromUser=selUsers[0];if(ftMode==='to'&&selUsers.length===1)p.toUser=selUsers[0];if(ftMode==='from_to'&&selUsers.length===2){p.fromUser=displaySpan.dataset.from;p.toUser=displaySpan.dataset.to}}else if(selUsers.length===1)p.user=selUsers[0];else if(selUsers.length>1)return alert('ユーザー2人選択時は from/to を指定してください');const setVal=(id,val)=>{const e=q(`#final-${id}`);if(e)e.value=val||''};const setCheck=(id,val)=>{const e=q(`#final-${id}`);if(e)e.checked=!!val};setVal('user',p.user);setVal('from',p.fromUser);setVal('to',p.toUser);setVal('searchMethod',p.searchMethod);setVal('keyword1',p.keyword1);setVal('keyword2',p.keyword2);setVal('keyword3',p.keyword3);setVal('exactPhrase',p.exactPhrase);setVal('exclude1',p.exclude1);setVal('exclude2',p.exclude2);setVal('exclude3',p.exclude3);setVal('since',p.since);setVal('until',p.until);setVal('minFaves',p.minFaves);setVal('minReplies',p.minReplies);setVal('minRetweets',p.minRetweets);setVal('lang',p.lang);setCheck('imagesOnly',p.imagesOnly);setCheck('videosOnly',p.videosOnly);setCheck('followerOnly',p.followerOnly);setCheck('excludeLang',p.excludeLang);switchScreen('advanced-search-screen')};q('#x-search-form-final-btn').onclick=()=>{const v=id=>q(`#final-${id}`).value,c=id=>q(`#final-${id}`).checked,parts=[];const user=v('user'),from=v('from'),to=v('to');if(user&&(from||to))return alert('ユーザー名とfrom/toは同時に使用できません');if(user)parts.push(encodeURIComponent(user));if(from)parts.push(`from:${from}`);if(to)parts.push(`to:${to}`);const kws=[v('keyword1'),v('keyword2'),v('keyword3')].filter(Boolean);if(kws.length>0)parts.push(`(${kws.map(k=>`\"${k}\"`).join(` ${v('searchMethod')||' '} `)})`);if(v('exactPhrase'))parts.push(`\"${v('exactPhrase')}\"`);[v('exclude1'),v('exclude2'),v('exclude3')].filter(Boolean).forEach(ex=>parts.push(`-${ex}`));if(v('since'))parts.push(`since:${v('since')}`);if(v('until'))parts.push(`until:${v('until')}`);if(v('minFaves'))parts.push(`min_faves:${v('minFaves')}`);if(v('minReplies'))parts.push(`min_replies:${v('minReplies')}`);if(v('minRetweets'))parts.push(`min_retweets:${v('minRetweets')}`);if(c('imagesOnly'))parts.push('filter:images');if(c('videosOnly'))parts.push('filter:videos');if(c('followerOnly'))parts.push('filter:follows');if(v('lang'))parts.push(`${c('excludeLang')?'-':''}lang:${v('lang')}`);location.href=`https://x.com/search?q=${encodeURIComponent(parts.join(' '))}&src=typed_query`};})()"},{"name":"仮","type":"button","js":"javascript:(function(){\n if (window._bmUI3) return;\n window._bmUI3 = true;\n \n const style = `\n #bm3-generator {\n position: fixed;\n top: 20px;\n left: 20px;\n background: white;\n border: 1px solid #ccc;\n padding: 10px;\n z-index: 99999;\n font-family: sans-serif;\n box-shadow: 2px 2px 10px rgba(0,0,0,0.2);\n }\n #bm3-generator input {\n width: 300px;\n padding: 5px;\n margin: 5px 0;\n }\n #bm3-generator button {\n padding: 5px 10px;\n margin-right: 5px;\n }\n #bm3-close {\n position: absolute;\n top: 5px;\n right: 5px;\n cursor: pointer;\n font-weight: bold;\n }\n `;\n \n const html = `\n <div id=\"bm3-generator\">\n <div id=\"bm3-close\">☒</div>\n <input id=\"bm3-text\" type=\"text\" placeholder=\"指定文言 入力欄\" />\n <br/>\n <button id=\"bm3-copy\">コピー</button>\n </div>\n `;\n \n const styleTag = document.createElement('style');\n styleTag.textContent = style;\n document.head.appendChild(styleTag);\n \n const container = document.createElement('div');\n container.innerHTML = html;\n document.body.appendChild(container);\n \n document.getElementById('bm3-close').onclick = () => {\n container.remove();\n styleTag.remove();\n delete window._bmUI3;\n };\n \n document.getElementById('bm3-copy').onclick = () => {\n const text = document.getElementById('bm3-text').value;\n if (!text) return alert(\"文言を入力してください\");\n \n const escaped = text.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\");\n const bookmarklet = `javascript:(function(){const t=document.createElement('textarea');t.value='${escaped}';document.body.appendChild(t);t.select();document.execCommand('copy');document.body.removeChild(t);})();`;\n \n const textarea = document.createElement('textarea');\n textarea.value = bookmarklet;\n document.body.appendChild(textarea);\n textarea.select();\n document.execCommand('copy');\n document.body.removeChild(textarea);\n alert(\"文言コピー用のブックマークレットをコピーしました\");\n };\n })();"},{"name":"仮2","type":"folder","children":[{"name":"仮3","type":"button","js":"javascript:window.location.href=\"https://www.youtube.com/@ThomasGadgemaga/videos\";"}],"isOpen":false}],"isOpen":true},{"name":"ショートカットパネル","type":"button","js":"javascript:(function() {\n  'use strict';\n  /* MULTIGEN_METADATA: [{\"type\":\"toolpanel_button\",\"fileName\":\"pctool.user\",\"buttonName\":\"ショートカットパネル\",\"position\":{\"yProp\":\"top\",\"yVal\":\"10\",\"xProp\":\"left\",\"xVal\":\"10\"},\"autoExpandRules\":[{\"url\":\"https://x.com/\",\"folderName\":\"X\"},{\"url\":\"https://www.youtube.com/\",\"folderName\":\"Youtube\"},{\"url\":\"https://mail.google.com/\",\"folderName\":\"メール\"},{\"url\":\"https://sites.google.com/view/toolpaneleditor/\",\"folderName\":\"ツールパネル\"},{\"url\":\"https://gadget-otaku.github.io/Bookmarklet/HTML%E5%88%B6%E4%BD%9C/%E7%B5%B1%E5%90%88%E3%83%84%E3%83%BC%E3%83%AB%E3%83%91%E3%83%8D%E3%83%AB%E3%83%BB%E3%82%B8%E3%82%A7%E3%83%8D%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%203.0.html\",\"folderName\":\"ツールパネル\"},{\"url\":\"https://sites.google.com/view/homepage-custom-shortcut/\",\"folderName\":\"ShortcutPanel\"},{\"url\":\"https://sites.google.com/view/userscriptgenerator/\",\"folderName\":\"UserScript\"},{\"url\":\"https://sites.google.com/view/custome-search2/\",\"folderName\":\"カスタムショートカット\"},{\"url\":\"https://gadget-otaku.github.io/Bookmarklet/\",\"folderName\":\"制作\"},{\"url\":\"https://chatgpt.com/\",\"folderName\":\"制作\"},{\"url\":\"https://gemini.google.com/\",\"folderName\":\"制作\"},{\"url\":\"https://x.com/i/\",\"folderName\":\"制作\"},{\"url\":\"https://chat.deepseek.com/\",\"folderName\":\"制作\"}],\"favoritesList\":[\"UserScript編集・更新\",\"メモ帳\",\"ショートカットパネル\",\"JavaScript実行\",\"再生速度\",\"Geminiに質問ツールパネル\",\"ローマ字変換\"],\"githubLinkRules\":[{\"buttonName\":\"リスト付きX詳細検索\",\"githubUrl\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/x-search-panel.js\"},{\"buttonName\":\"ショートカットパネル\",\"githubUrl\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pc_base_shortcutpanel.js\"}],\"name\":\"pctool.user\",\"version\":\"1.1.37\",\"downloadURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pctool.user.js\",\"updateURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pctool.user.js\",\"urls\":[{\"type\":\"match\",\"url\":\"http*://*\\/*\"}],\"mode\":\"button\",\"button\":{\"displayMode\":\"transparent\",\"display\":{\"top\":\"0\",\"left\":\"0\",\"bottom\":\"30\",\"right\":\"30\"},\"cursor\":{\"top\":\"0\",\"left\":\"0\",\"bottom\":\"30\",\"right\":\"30\"},\"contentType\":\"default\"}},{\"type\":\"google_homepage\",\"fileName\":\"pc_google_shortcutpanel.user\",\"name\":\"Googleカスタムショートカット\",\"version\":\"1.1.30\",\"downloadURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pc_google_shortcutpanel.user.js\",\"updateURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pc_google_shortcutpanel.user.js\"},{\"type\":\"javascript\",\"fileName\":\"pc_base_shortcutpanel\"},{\"type\":\"userscript_button\",\"fileName\":\"pc_botton_shortcutpanel.user\",\"name\":\"pc_botton_shortcutpanel.user\",\"version\":\"1.0.8\",\"downloadURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pc_botton_shortcutpanel.user.js\",\"updateURL\":\"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pc_botton_shortcutpanel.user.js\",\"urls\":[{\"type\":\"match\",\"url\":\"http*://*\\/*\"}],\"mode\":\"button\",\"button\":{\"displayMode\":\"transparent\",\"display\":{\"top\":\"0\",\"left\":\"30\",\"bottom\":\"30\",\"right\":\"60\"},\"cursor\":{\"top\":\"0\",\"left\":\"30\",\"bottom\":\"30\",\"right\":\"60\"},\"contentType\":\"default\"}}] */\n   const metadata = {\n  \"name\": \"Googleカスタムショートカット\",\n  \"source\": \"\",\n  \"downloadURL\": \"\",\n  \"updateURL\": \"\"\n};\n\n  const config = {\n   scale: 80, gridCols: 5, gridRows: 4,\n   folderScale: 100, folderGridCols: 4, folderGridRows: 4,\n   position: { yProp: 'top', yVal: 20, xProp: 'left', xVal: 20 }\n  };\n  const baseTextColor = 'black';\n  const items = [\n       {\n           \"name\": \"YouTube\",\n           \"url\": \"https://www.youtube.com\",\n           \"icon\": \"https://images.icon-icons.com/1584/PNG/512/3721679-youtube_108064.png\"\n       },\n       {\n           \"name\": \"X\",\n           \"url\": \"https://x.com/home\",\n           \"icon\": \"https://img.freepik.com/free-vector/new-2023-twitter-logo-x-icon-design_1017-45418.jpg\"\n       },\n       {\n           \"name\": \"AI\",\n           \"isFolder\": true,\n           \"children\": [\n               {\n                   \"name\": \"ChatGPT\",\n                   \"url\": \"https://chatgpt.com/?model=auto\",\n                   \"icon\": \"https://i.pinimg.com/736x/a6/8e/fc/a68efcad5debfbe207f52e8c19b379e9.jpg\"\n               },\n               {\n                   \"name\": \"Gemini\",\n                   \"url\": \"https://gemini.google.com/app?hl=ja\",\n                   \"icon\": \"https://asset.watch.impress.co.jp/img/ktw/docs/1583/273/icon_l.jpg\"\n               },\n               {\n                   \"name\": \"Google AI Studio\",\n                   \"url\": \"https://aistudio.google.com\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=aistudio.google.com\"\n               },\n               {\n                   \"name\": \"DeepSeek\",\n                   \"url\": \"https://chat.deepseek.com\",\n                   \"icon\": \"https://play-lh.googleusercontent.com/d2zqBFBEymSZKaVg_dRo1gh3hBFn7_Kl9rO74xkDmnJeLgDW0MoJD3cUx0QzZN6jdsg\"\n               },\n               {\n                   \"name\": \"Venice AI\",\n                   \"url\": \"https://venice.ai/chat\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=venice.ai\"\n               },\n               {\n                   \"name\": \"Genspark\",\n                   \"url\": \"https://www.genspark.ai/agents?type=moa_chat\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=www.genspark.ai\"\n               }\n           ]\n       },\n       {\n           \"name\": \"ガジェット\",\n           \"isFolder\": true,\n           \"children\": [\n               {\n                   \"name\": \"CPU性能比較\",\n                   \"url\": \"https://pcfreebook.com/article/458775622.html\",\n                   \"icon\": \"https://pcfreebook.com/wp-content/uploads/2020/02/cpu-speclist-desktop-top.png\"\n               },\n               {\n                   \"name\": \"GPU性能比較\",\n                   \"url\": \"https://pcfreebook.com/article/459993300.html\",\n                   \"icon\": \"https://pcfreebook.com/wp-content/uploads/2020/02/cpu-speclist-desktop-top.png\"\n               },\n               {\n                   \"name\": \"価格 ノートパソコン\",\n                   \"url\": \"https://s.kakaku.com/pc/note-pc/itemlist.aspx#/popup=narrow\",\n                   \"icon\": \"https://play-lh.googleusercontent.com/aTlc3ts5q7sz-b8WaKi6xjcTVgcp4toOWKBuJwaNK7xRy99WGH6WtUKAzyz8sJNt3y8\"\n               },\n               {\n                   \"name\": \"価格 ミラーレス\",\n                   \"url\": \"https://s.kakaku.com/camera/mirrorless-slr/itemlist.aspx#/popup=narrow\",\n                   \"icon\": \"https://play-lh.googleusercontent.com/aTlc3ts5q7sz-b8WaKi6xjcTVgcp4toOWKBuJwaNK7xRy99WGH6WtUKAzyz8sJNt3y8\"\n               },\n               {\n                   \"name\": \"価格 ズームレンズ\",\n                   \"url\": \"https://s.kakaku.com/camera/zoom_lens/itemlist.aspx#/popup=narrow\",\n                   \"icon\": \"https://play-lh.googleusercontent.com/aTlc3ts5q7sz-b8WaKi6xjcTVgcp4toOWKBuJwaNK7xRy99WGH6WtUKAzyz8sJNt3y8\"\n               },\n               {\n                   \"name\": \"gsmarena phonefinder\",\n                   \"url\": \"https://m.gsmarena.com/search.php3?\",\n                   \"icon\": \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTVOOCuz-6hrhEDC_sy9eVqnq_Q_r843ul56w&s\"\n               },\n               {\n                   \"name\": \"スマホ イメージセンサー\",\n                   \"url\": \"https://spinformation.info/all/smartphone-image-sensor/\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=spinformation.info\"\n               },\n               {\n                   \"name\": \"visaギフト\",\n                   \"url\": \"https://mygift.giftcardmall.com/\",\n                   \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Old_Visa_Logo.svg/250px-Old_Visa_Logo.svg.png\"\n               },\n               {\n                   \"name\": \"腕時計 時刻合わせ\",\n                   \"url\": \"https://support.casio.jp/wat/adjustment/ta5161_ja/\",\n                   \"icon\": \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTKM2zBns6CTS8niY7RI-YTpb7OwgbChkvhBw&s\"\n               }\n           ]\n       },\n       {\n           \"name\": \"翻訳\",\n           \"url\": \"https://translate.google.co.jp/?hl=ja&tab=rT&sl=en&tl=ja&op=translate\",\n           \"icon\": \"https://play-lh.googleusercontent.com/ZrNeuKthBirZN7rrXPN1JmUbaG8ICy3kZSHt-WgSnREsJzo2txzCzjIoChlevMIQEA=w240-h480-rw\"\n       },\n       {\n           \"name\": \"Astate\",\n           \"url\": \"https://www.astate.edu\",\n           \"icon\": \"https://www.astate.edu/dotAsset/dab6dbb0-0dae-439c-b6d6-1e729565418a.png\"\n       },\n       {\n           \"name\": \"Dashboard\",\n           \"url\": \"https://pack.astate.edu/public/dashboard\",\n           \"icon\": \"https://www.google.com/s2/favicons?sz=256&domain_url=pack.astate.edu\"\n       },\n       {\n           \"name\": \"大学関連\",\n           \"isFolder\": true,\n           \"children\": [\n               {\n                   \"name\": \"mybill\",\n                   \"url\": \"https://epay.astate.edu/C20019_tsa/web/login.jsp\",\n                   \"icon\": \"https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://epay.astate.edu/C20019_tsa/web/login.jsp&size=16\"\n               },\n               {\n                   \"name\": \"Housing\",\n                   \"url\": \"https://astate.starrezhousing.com/StarRezPortalX/FC6488C4/1/1/Home-Welcome_to_the_A_Sta?UrlToken=A0AC9875\",\n                   \"icon\": \"https://iconbox.fun/wp/wp-content/uploads/192_b_24.png\"\n               },\n               {\n                   \"name\": \"バス\",\n                   \"url\": \"https://www.astate.edu/a/global-initiatives/international/forms/student-advising\",\n                   \"icon\": \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSsKEzw38TGeOe-kK91Wsvg05lgWbxyQj57DQ&s\"\n               },\n               {\n                   \"name\": \"ｽｹｼﾞｭ-ﾙ\",\n                   \"url\": \"https://catalog.astate.edu/preview_program.php?catoid=8&poid=2347&returnto=244\",\n                   \"icon\": \"https://img.icons8.com/color/512/google-logo.png\"\n               },\n               {\n                   \"name\": \"英語 教材\",\n                   \"url\": \"https://asuj.grlcontent.com/user/login?autologout_timeout=1\",\n                   \"icon\": \"https://play-lh.googleusercontent.com/Z567KavO3EE8mxGFtzgGrCkEtdljuySFNqxlaWACW5lcrksBUXC4CA0kHLJ0gYgoy5Y=w240-h480-rw\"\n               },\n               {\n                   \"name\": \"教材 bookstore\",\n                   \"url\": \"https://astatebookstore.com/textbooks\",\n                   \"icon\": \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRsE604CUZK43liZCcbSISUiHL9CoMB8AJxJg&s\"\n               },\n               {\n                   \"name\": \"vitalsource\",\n                   \"url\": \"https://bookshelf.vitalsource.com/home/dashboard?context=login\",\n                   \"icon\": \"https://store-images.s-microsoft.com/image/apps.15180.14164704504445663.3fbcf2df-8bab-4f09-822a-094d3f6ef53e.b6ea252f-f946-4acc-96c0-e2dc7370daf8\"\n               },\n               {\n                   \"name\": \"食事 時間\",\n                   \"url\": \"https://astate.sodexomyway.com/en-us/locations/\",\n                   \"icon\": \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQp0r7Ed3_kbqc9UumdzCIDUtuxts-qjAewBA&s\"\n               }\n           ]\n       },\n       {\n           \"name\": \"Outlook\",\n           \"url\": \"https://outlook.office365.com/mail/\",\n           \"icon\": \"https://cdn.iconscout.com/icon/free/png-256/free-microsoft-outlook-1868952-1583116.png\"\n       },\n       {\n           \"name\": \"Gmail\",\n           \"url\": \"https://mail.google.com/mail/u/1/#inbox\",\n           \"icon\": \"https://img.icons8.com/color/512/gmail-new.png\"\n       },\n       {\n           \"name\": \"Github\",\n           \"url\": \"https://github.com/Gadget-Otaku/Bookmarklet\",\n           \"icon\": \"https://cdn-icons-png.freepik.com/256/733/733609.png\"\n       },\n       {\n           \"name\": \"GreasyFork\",\n           \"url\": \"https://greasyfork.org/ja/users/1433480-%E3%82%B9%E3%83%9E%E3%83%9B%E3%82%AA%E3%82%BF%E3%82%AF%E3%81%AB%E3%82%8F%E3%81%8B\",\n           \"icon\": \"https://files.svgcdn.io/simple-icons/greasyfork.svg\"\n       },\n       {\n           \"name\": \"制作\",\n           \"isFolder\": true,\n           \"children\": [\n               {\n                   \"name\": \"ツールパネル\",\n                   \"url\": \"https://gadget-otaku.github.io/Bookmarklet/HTML%E5%88%B6%E4%BD%9C/%E7%B5%B1%E5%90%88%E3%83%84%E3%83%BC%E3%83%AB%E3%83%91%E3%83%8D%E3%83%AB%E3%83%BB%E3%82%B8%E3%82%A7%E3%83%8D%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%203.0.html\",\n                   \"icon\": \"https://raw.githubusercontent.com/Gadget-Otaku/Bookmarklet/refs/heads/main/HTML%E5%88%B6%E4%BD%9C/favicon/%E7%B5%B1%E5%90%88%E3%83%84%E3%83%BC%E3%83%AB%E3%83%91%E3%83%8D%E3%83%AB%E3%83%BB%E3%82%B8%E3%82%A7%E3%83%8D%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%203.0%E7%94%A8favicon.ico\"\n               },\n               {\n                   \"name\": \"ショートカットパネル\",\n                   \"url\": \"https://gadget-otaku.github.io/Bookmarklet/HTML%E5%88%B6%E4%BD%9C/%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88%E3%83%91%E3%83%8D%E3%83%AB%E7%94%9F%E6%88%90%E3%83%BB%E7%B7%A8%E9%9B%86%E3%82%B5%E3%82%A4%E3%83%88.html\",\n                   \"icon\": \"https://raw.githubusercontent.com/Gadget-Otaku/Bookmarklet/main/HTML%E5%88%B6%E4%BD%9C/favicon/%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88%E3%83%91%E3%83%8D%E3%83%AB%E7%94%9F%E6%88%90%E3%83%BB%E7%B7%A8%E9%9B%86%E3%82%B5%E3%82%A4%E3%83%88%E7%94%A8favicon.ico\"\n               },\n               {\n                   \"name\": \"UserScript\",\n                   \"url\": \"https://gadget-otaku.github.io/Bookmarklet/HTML%E5%88%B6%E4%BD%9C/UserScript%20%E7%94%9F%E6%88%90%EF%BC%86%E7%B7%A8%E9%9B%86%E3%82%B5%E3%82%A4%E3%83%883.0.html\",\n                   \"icon\": \"https://img.icons8.com/color/512/google-sites--v2.png\"\n               },\n               {\n                   \"name\": \"X詳細検索\",\n                   \"url\": \"https://sites.google.com/view/x-advanced-panel-generator/%E3%83%9B%E3%83%BC%E3%83%A0\",\n                   \"icon\": \"https://raw.githubusercontent.com/Gadget-Otaku/Bookmarklet/refs/heads/main/HTML%E5%88%B6%E4%BD%9C/favicon/X%20%E8%A9%B3%E7%B4%B0%E6%A4%9C%E7%B4%A2%E3%83%91%E3%83%8D%E3%83%AB%20%E3%82%B8%E3%82%A7%E3%83%8D%E3%83%AC%E3%83%BC%E3%82%BF%E3%83%BC%20(%E5%A4%9A%E6%A9%9F%E8%83%BD%E7%B5%B1%E5%90%88%E7%89%88)%E7%94%A8favicon.ico\"\n               },\n               {\n                   \"name\": \"カスタム検索ブックマークレット生成・編集サイト2.0\",\n                   \"url\": \"https://gadget-otaku.github.io/Bookmarklet/HTML%E5%88%B6%E4%BD%9C/%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E6%A4%9C%E7%B4%A2.html\",\n                   \"icon\": \"https://img.icons8.com/color/512/google-sites--v2.png\"\n               },\n               {\n                   \"name\": \"site:検索\",\n                   \"url\": \"https://sites.google.com/view/site-search-multi-function/%E3%83%9B%E3%83%BC%E3%83%A0\",\n                   \"icon\": \"https://img.icons8.com/color/512/google-sites--v2.png\"\n               },\n               {\n                   \"name\": \"Googleサイト\",\n                   \"url\": \"https://sites.google.com/new?hl=ja\",\n                   \"icon\": \"https://img.icons8.com/color/512/google-sites--v2.png\"\n               }\n           ]\n       },\n       {\n           \"name\": \"メモ帳2.0\",\n           \"url\": \"https://gadget-otaku.github.io/Bookmarklet/%E3%83%A1%E3%83%A2%E5%B8%B32.0\",\n           \"icon\": \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTmsAZYI27WQaMCSK-W8M-1FoW4Tx-0BWk6dA&s\"\n       },\n       {\n           \"name\": \"Notion\",\n           \"url\": \"https://www.notion.so/2f61b782539d4036bef474f820fa42c2\",\n           \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Notion-logo.svg/1024px-Notion-logo.svg.png\"\n       },\n       {\n           \"name\": \"365\",\n           \"url\": \"https://m365.cloud.microsoft/?acctsw=1&auth=1\",\n           \"icon\": \"https://cdn-dynmedia-1.microsoft.com/is/content/microsoftcorp/Icon_Copilot_64x64?resMode=sharp2&op_usm=1.5,0.65,15,0&wid=32&hei=32&qlt=100&fit=constrain\"\n       },\n       {\n           \"name\": \"アドオン\",\n           \"isFolder\": true,\n           \"children\": [\n               {\n                   \"name\": \"Chrome拡張機能\",\n                   \"url\": \"https://chromewebstore.google.com/category/extensions?hl=ja\",\n                   \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/Google_Chrome_Web_Store_icon_2022.svg/2356px-Google_Chrome_Web_Store_icon_2022.svg.png\"\n               },\n               {\n                   \"name\": \"Firefoxアドオン\",\n                   \"url\": \"https://addons.mozilla.org/ja/firefox/\",\n                   \"icon\": \"https://play-lh.googleusercontent.com/zqsuwFUBwKRcGOSBinKQCL3JgfvOW49vJphq0ZF32aDgfqmuDyl-fEpx4Lxm4pRr7A=s256-rw\"\n               },\n               {\n                   \"name\": \"Edgeアドオン\",\n                   \"url\": \"https://microsoftedge.microsoft.com/addons/Microsoft-Edge-Extensions-Home?hl=ja-jp\",\n                   \"icon\": \"https://images.icon-icons.com/2429/PNG/512/microsoft_logo_icon_147261.png\"\n               }\n           ]\n       },\n       {\n           \"name\": \"IBT・TOEIC・就活\",\n           \"isFolder\": true,\n           \"children\": [\n               {\n                   \"name\": \"IBT\",\n                   \"url\": \"https://toeflibt.ets.org/home\",\n                   \"icon\": \"https://titc.or.id/wp-content/uploads/2025/04/TOEFL-IBT-Home-Edition.png\"\n               },\n               {\n                   \"name\": \"Ankilot\",\n                   \"url\": \"https://ankilot.com/\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=256&domain_url=ankilot.com\"\n               }\n           ]\n       },\n       {\n           \"name\": \"Google\",\n           \"isFolder\": true,\n           \"children\": [\n               {\n                   \"name\": \"Keep\",\n                   \"url\": \"https://keep.google.com/u/0/\",\n                   \"icon\": \"https://www.g-workspace.jp/wp-content/uploads/Keep_Product_Icon_512dp.png\"\n               },\n               {\n                   \"name\": \"ドライブ\",\n                   \"url\": \"https://drive.google.com/drive/u/0/home\",\n                   \"icon\": \"https://cdn-icons-png.freepik.com/256/5968/5968523.png?semt=ais_white_label\"\n               },\n               {\n                   \"name\": \"ドキュメント\",\n                   \"url\": \"https://docs.google.com/document/u/0/\",\n                   \"icon\": \"https://cdn-icons-png.freepik.com/512/5968/5968517.png\"\n               },\n               {\n                   \"name\": \"スプレッドシート\",\n                   \"url\": \"https://docs.google.com/spreadsheets/u/0/\",\n                   \"icon\": \"https://cdn-icons-png.freepik.com/256/5968/5968557.png?semt=ais_white_label\"\n               },\n               {\n                   \"name\": \"スライド\",\n                   \"url\": \"https://docs.google.com/presentation/u/0/\",\n                   \"icon\": \"https://cdn-icons-png.freepik.com/256/2504/2504779.png?semt=ais_white_label\"\n               },\n               {\n                   \"name\": \"マップ\",\n                   \"url\": \"https://www.google.com/maps?authuser=0\",\n                   \"icon\": \"https://cdn-icons-png.freepik.com/256/2662/2662686.png?semt=ais_white_label\"\n               },\n               {\n                   \"name\": \"Earth\",\n                   \"url\": \"https://earth.google.com/web/\",\n                   \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Google_Earth_icon.svg/2048px-Google_Earth_icon.svg.png\"\n               },\n               {\n                   \"name\": \"パスワードマネージャー\",\n                   \"url\": \"https://passwords.google.com/?hl=ja\",\n                   \"icon\": \"https://images.icon-icons.com/2631/PNG/512/google_search_new_logo_icon_159150.png\"\n               },\n               {\n                   \"name\": \"Colab\",\n                   \"url\": \"https://colab.research.google.com/\",\n                   \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Google_Colaboratory_SVG_Logo.svg/2560px-Google_Colaboratory_SVG_Logo.svg.png\"\n               }\n           ]\n       },\n       {\n           \"name\": \"Notebook LM\",\n           \"url\": \"https://notebooklm.google.com/?authuser=0&original_referer=https:%2F%2Fogs.google.com%23&pli=1\",\n           \"icon\": \"https://play-lh.googleusercontent.com/qWDLmYCI4Lqzq8J-LhtvWvp1HIPkJb2lqkHjduXM7tnCo7N1tmKxnYdaX7CS2_5pkDuW\"\n       },\n       {\n           \"name\": \"Pixiv\",\n           \"url\": \"https://www.pixiv.net/bookmark_new_illust.php\",\n           \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=pixiv.net\"\n       },\n       {\n           \"name\": \"hanime\",\n           \"url\": \"https://hianime.to/recently-updated\",\n           \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=hianime.to\"\n       },\n       {\n           \"name\": \"原神\",\n           \"isFolder\": true,\n           \"children\": [\n               {\n                   \"name\": \"メイン効果量\",\n                   \"url\": \"https://wikiwiki.jp/genshinwiki/%E8%81%96%E9%81%BA%E7%89%A9#ParamSubOps:~:text=%E7%B0%A1%E6%98%93%E6%97%A9%E8%A6%8B%E8%A1%A8-,%E7%A8%AE%E9%A1%9E,-%E2%98%855%0A%EF%BC%88Lv.20\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=wikiwiki.jp/genshinwiki\"\n               },\n               {\n                   \"name\": \"サブ効果量\",\n                   \"url\": \"https://wikiwiki.jp/genshinwiki/%E8%81%96%E9%81%BA%E7%89%A9#ParamSubOps:~:text=%E7%A0%94%E7%A9%B6%E3%82%92%E5%8F%82%E7%85%A7%E3%80%82-,%E3%82%B5%E3%83%96%E5%8A%B9%E6%9E%9C,-%E4%BD%8E\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=wikiwiki.jp/genshinwiki\"\n               },\n               {\n                   \"name\": \"lv20必要聖遺物\",\n                   \"url\": \"https://wikiwiki.jp/genshinwiki/%E8%81%96%E9%81%BA%E7%89%A9#ParamSubOps\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=wikiwiki.jp/genshinwiki\"\n               },\n               {\n                   \"name\": \"lv90必要経験値\",\n                   \"url\": \"https://kamigame.jp/genshin/page/132093570420104073.html#:~:text=%e3%81%8c%e5%b0%91%e3%81%aa%e3%81%8f%e3%81%aa%e3%82%8b%e3%80%82-,1%e3%80%9c90%e3%81%be%e3%81%a7%e3%81%ae%e5%bf%85%e8%a6%81%e7%b5%8c%e9%a8%93%e5%80%a4,-%e3%83%ac%e3%83%99%e3%83%ab\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=kamigame.jp\"\n               },\n               {\n                   \"name\": \"聖遺物スコア\",\n                   \"url\": \"https://tools.jabrek.net/Genshin_score/?uid=1800441283&type=attack\",\n                   \"icon\": \"https://webstatic.hoyoverse.com/upload/uploadstatic/contentweb/20210104/2021010417060227516.png\"\n               },\n               {\n                   \"name\": \"育成計算機\",\n                   \"url\": \"https://act.hoyolab.com/ys/event/calculator-sea/index.html?bbs_presentation_style=fullscreen&bbs_auth_required=true&utm_source=hoyolab&utm_medium=tools&lang=ja-jp&bbs_theme=dark&bbs_theme_device=1#/\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=act.hoyolab.com\"\n               },\n               {\n                   \"name\": \"テイワットマップ\",\n                   \"url\": \"https://act.hoyolab.com/ys/app/interactive-map/?lang=ja-jp#/map/2?shown_types=410,521¢er=-1665.40,-6947.56&zoom=-4.50\",\n                   \"icon\": \"https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://act.hoyolab.com/ys/app/interactive-map/?lang=ja-jp&size=64#/map/2?shown_types=410,521¢er=-1665.40,-6947.56&zoom=-4.50\"\n               },\n               {\n                   \"name\": \"ガチャリーク\",\n                   \"url\": \"https://tori-game.com/gensingacha/\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=tori-game.com\"\n               },\n               {\n                   \"name\": \"過去ガチャ\",\n                   \"url\": \"https://game8.jp/genshin/631517\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=game8.jp\"\n               },\n               {\n                   \"name\": \"チャージセンター\",\n                   \"url\": \"https://sdk.hoyoverse.com/payment/genshin/index.html#/m\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=sdk.hoyoverse.com\"\n               },\n               {\n                   \"name\": \"シリアルコード\",\n                   \"url\": \"https://gamewith.jp/genshin/article/show/231856\",\n                   \"icon\": \"https://www.google.com/s2/favicons?sz=64&domain_url=gamewith.jp\"\n               }\n           ]\n       }\n   ];\n  const urlRules = [\n       {\n           \"url\": \"https://www.google.com/\",\n           \"color\": \"black\"\n       },\n       {\n           \"url\": \"https://gadget-otaku.github.io/Bookmarklet/\",\n           \"color\": \"black\"\n       },\n       {\n           \"url\": \"https://www.youtube.com/\",\n           \"color\": \"white\"\n       },\n       {\n           \"url\": \"https://x.com/\",\n           \"color\": \"white\"\n       },\n       {\n           \"url\": \"https://chatgpt.com/\",\n           \"color\": \"white\"\n       },\n       {\n           \"url\": \"https://gemini.google.com/\",\n           \"color\": \"white\"\n       },\n       {\n           \"url\": \"https://chat.deepseek.com/\",\n           \"color\": \"white\"\n       },\n       {\n           \"url\": \"https://hianime.to/\",\n           \"color\": \"white\"\n       }\n   ];\n  const styleText = `\n     :root { --item-size: 72px; --icon-size: 40px; --folder-size: 40px; --border-radius: 12px; --panel-padding: 20px; --item-gap: 15px; }\n     .panel-style { box-sizing: border-box; background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border-radius: var(--border-radius); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2), inset 0 1px 1px rgba(255,255,255,0.4); padding: var(--panel-padding); position: fixed; }\n     .custom-shortcuts-container { transform: scale(${config.scale / 100}); transform-origin: ${config.position.yProp} ${config.position.xProp}; display: grid; grid-template-columns: repeat(${config.gridCols}, var(--item-size)); grid-auto-rows: var(--item-size); gap: var(--item-gap); z-index: 2147483647; pointer-events: auto; cursor: move; max-height: calc(var(--item-size) * ${config.gridRows} + var(--item-gap) * (${config.gridRows} - 1) + var(--panel-padding) * 2); overflow-y: auto; padding-right: 5px; }\n     .custom-shortcuts-container::-webkit-scrollbar { width: 8px; } .custom-shortcuts-container::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,0.4); border-radius: 4px; } .custom-shortcuts-container::-webkit-scrollbar-track { background-color: rgba(255,255,255,0.1); }\n     .panel-controls { position: absolute; top: 8px; right: 8px; display: flex; gap: 8px; cursor: default; }\n     .control-button { width: 16px; height: 16px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: sans-serif; font-size: 12px; line-height: 16px; cursor: pointer; transition: all 0.2s; user-select: none; background-color: rgba(0, 0, 0, 0.7); }\n     .new-tab-btn.active { background-color: rgba(255, 255, 255, 0.6) !important; color: #1a73e8 !important; font-weight: bold; }\n     .settings-button { width: 16px; height: 16px; cursor: pointer; background-image: url('https://kotonohaworks.com/free-icons/wp-content/uploads/kkrn_icon_haguruma_1.png'); background-size: contain; background-repeat: no-repeat; background-position: center; filter: invert(1); opacity: 0.7; transition: opacity 0.2s; }\n     .settings-button:hover { opacity: 1; }\n     .custom-shortcut { display: flex; flex-direction: column; align-items: center; justify-content: center; text-decoration: none; width: var(--item-size); height: var(--item-size); transition: all 0.2s; border-radius: var(--border-radius); padding: 4px; box-sizing: border-box; cursor: pointer; }\n     .custom-shortcut:hover { transform: translateY(-5px); background: rgba(255,255,255,0.3); }\n     .custom-shortcut img, .custom-shortcut .folder-icon-preview { width: var(--icon-size); height: var(--icon-size); object-fit: contain; border-radius: calc(var(--border-radius) * 0.5); }\n     .custom-shortcut span { font-size: 12px; margin-top: 6px; text-align: center; width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; transition: color 0.3s; }\n     .light-text .custom-shortcut span, .light-text .control-button { color: white !important; } .dark-text .custom-shortcut span, .dark-text .control-button { color: black !important; }\n     .custom-folder .folder-icon-preview { display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); gap: 2px; padding: 2px; width: var(--folder-size); height: var(--folder-size); background: rgba(0,0,0,0.1); border-radius: var(--border-radius); }\n     .folder-icon-preview .preview-icon { width: 95%; height: 95%; background-size: contain; background-repeat: no-repeat; background-position: center; border-radius: 4px; }\n     .folder-contents-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2147483647; display: flex; align-items: center; justify-content: center; animation: blurFadeIn 0.3s ease-out forwards; }\n     .folder-contents { display: block; transform: scale(0.8); opacity: 0; animation: scaleUp 0.15s ease-out 0.05s forwards; position: relative; overflow: hidden; padding-bottom: 5px; }\n     .folder-pages-slider { display: flex; flex-direction: column; transition: transform 0.3s ease-in-out; cursor: grab; }\n     .folder-page { display: grid; grid-template-columns: repeat(${config.folderGridCols}, var(--item-size)); grid-auto-rows: var(--item-size); gap: var(--item-gap); }\n     .folder-pagination-dots { text-align: center; padding-top: 5px; }\n     .folder-pagination-dots .dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background: rgba(255,255,255,0.5); margin: 0 4px; cursor: pointer; transition: background 0.2s; }\n     .folder-pagination-dots .dot.active { background: white; }\n     @keyframes scaleUp { from { transform: scale(0.8); opacity: 0; } to { transform: scale(${config.folderScale / 100}); opacity: 1; } }\n     @keyframes blurFadeIn { to { background: rgba(0,0,0,0.2); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px); } }\n   `;\n  let isDarkMode = false; let newTabMode = false;\n\n  function applyTheme(isDark) { isDarkMode = isDark; container.classList.toggle('dark-text', isDarkMode); container.classList.toggle('light-text', !isDarkMode); const mainToggle = container.querySelector('.toggle-mode-btn'); if (mainToggle) mainToggle.textContent = isDarkMode ? '●' : '◯'; document.querySelectorAll('.folder-contents').forEach(fc => { fc.classList.toggle('dark-text', isDarkMode); fc.classList.toggle('light-text', !isDarkMode); const localToggle = fc.querySelector('.toggle-mode-btn'); if (localToggle) localToggle.textContent = isDarkMode ? '●' : '◯'; }); }\n  function chromeY(el){ const s = getComputedStyle(el); const num = v => parseFloat(v) || 0; return num(s.paddingTop) + num(s.paddingBottom) + num(s.borderTopWidth) + num(s.borderBottomWidth); }\n  function createShortcut(item) { const link = document.createElement('a'); link.href = item.url; link.className = \"custom-shortcut\"; link.addEventListener('click', (e) => { e.preventDefault(); if (newTabMode) { window.open(link.href, '_blank'); } else { window.location.href = link.href; } }); const img = document.createElement('img'); try { img.src = item.icon || `https://www.google.com/s2/favicons?sz=64&domain_url=${new URL(item.url).hostname}`; } catch(e) { img.src = ''; } img.alt = item.name; img.onerror = (e) => { e.target.style.display='none'; }; const span = document.createElement('span'); span.textContent = item.name; link.appendChild(img); link.appendChild(span); return link; }\n  function createFolder(item) { const folder = document.createElement('div'); folder.className = \"custom-shortcut custom-folder\"; const preview = document.createElement('div'); preview.className = 'folder-icon-preview'; if(item.children) { item.children.slice(0, 9).forEach(child => { if (child.icon) { const iconDiv = document.createElement('div'); iconDiv.className = 'preview-icon'; iconDiv.style.backgroundImage = `url(${child.icon})`; preview.appendChild(iconDiv); }}); } const span = document.createElement('span'); span.textContent = item.name; folder.appendChild(preview); folder.appendChild(span);\n    folder.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const overlay = document.createElement('div');\n        overlay.className = 'folder-contents-overlay';\n        const contents = document.createElement('div');\n        contents.className = 'folder-contents panel-style';\n        contents.classList.toggle('dark-text', isDarkMode);\n\n        contents.classList.toggle('light-text', !isDarkMode);\n        // ▼ ここから追加\n        // スクロールは内部で完結させる（下のページに行かない）\n        contents.style.overflow = 'hidden';\n        \n        // フォルダ用のコントロール（新タブ切替・文字色切替・閉じる）\n        const overlayControls = document.createElement('div');\n        overlayControls.className = 'panel-controls';\n        \n        const overlayNewTabBtn = document.createElement('div');\n        overlayNewTabBtn.className = 'control-button new-tab-btn';\n        overlayNewTabBtn.textContent = '+';\n        overlayNewTabBtn.title = '新しいタブで開く (トグル)';\n        overlayNewTabBtn.classList.toggle('active', newTabMode);\n        overlayNewTabBtn.addEventListener('click', (e) => {\n          e.stopPropagation();\n          newTabMode = !newTabMode;\n          overlayNewTabBtn.classList.toggle('active', newTabMode);\n          // 元パネル側の表示も同期\n          const mainNewTabBtn = document.querySelector('.custom-shortcuts-container .new-tab-btn');\n          if (mainNewTabBtn) mainNewTabBtn.classList.toggle('active', newTabMode);\n        });\n        \n        const overlayToggleModeBtn = document.createElement('div');\n        overlayToggleModeBtn.className = 'control-button toggle-mode-btn';\n        overlayToggleModeBtn.textContent = isDarkMode ? '●' : '◯';\n        overlayToggleModeBtn.title = '文字色切替';\n        overlayToggleModeBtn.addEventListener('click', (e) => {\n          e.stopPropagation();\n          applyTheme(!isDarkMode);\n        });\n        \n        const overlayCloseBtn = document.createElement('div');\n        overlayCloseBtn.className = 'control-button close-btn';\n        overlayCloseBtn.textContent = '✕';\n        overlayCloseBtn.title = '閉じる';\n        overlayCloseBtn.addEventListener('click', (e) => {\n          e.stopPropagation();\n          overlay.remove();\n        });\n        \n        overlayControls.appendChild(overlayNewTabBtn);\n        overlayControls.appendChild(overlayToggleModeBtn);\n        overlayControls.appendChild(overlayCloseBtn);\n        contents.appendChild(overlayControls);\n        // ▲ ここまで追加\n\n        const slider = document.createElement('div');\n        slider.className = 'folder-pages-slider';\n        const children = item.children || [];\n        const itemsPerPage = config.folderGridCols * config.folderGridRows;\n        const totalPages = Math.ceil(children.length / itemsPerPage);\n        let currentPage = 0;\n        if (totalPages === 0) {\n            const emptyMsg = document.createElement('div');\n            emptyMsg.textContent = 'このフォルダは空です。';\n            emptyMsg.style.padding = '20px';\n            emptyMsg.style.textAlign = 'center';\n            slider.appendChild(emptyMsg);\n        } else {\n            for (let i = 0; i < totalPages; i++) {\n                const page = document.createElement('div');\n                page.className = 'folder-page';\n                const pageItems = children.slice(i * itemsPerPage, (i + 1) * itemsPerPage);\n                pageItems.forEach(child => { if (!child.isFolder) { page.appendChild(createShortcut(child)); } });\n                slider.appendChild(page);\n            }\n        }\n        contents.appendChild(slider);\n        let dotsContainer;\n        if (totalPages > 1) {\n            dotsContainer = document.createElement('div');\n            dotsContainer.className = 'folder-pagination-dots';\n            for (let i = 0; i < totalPages; i++) {\n                const dot = document.createElement('span');\n                dot.className = 'dot';\n                dot.dataset.page = i;\n                if (i === 0) dot.classList.add('active');\n                dot.onclick = (ev) => { ev.stopPropagation(); goToPage(i); };\n                dotsContainer.appendChild(dot);\n            }\n            contents.appendChild(dotsContainer);\n        }\n        overlay.appendChild(contents);\n\n        document.body.appendChild(overlay);\n\n        const pageEl = slider.querySelector('.folder-page');\n        const itemPx = parseFloat(\n          getComputedStyle(document.documentElement).getPropertyValue('--item-size')\n        ) || 72;\n        const cs = pageEl ? getComputedStyle(pageEl) : null;\n        const gapPx = cs ? (parseFloat(cs.gap) || 15) : 15;\n        const pad = getComputedStyle(contents);\n        const padX = (parseFloat(pad.paddingLeft) || 0) + (parseFloat(pad.paddingRight) || 0);\n        \n        // 列数に応じた“理論幅” = アイテム幅×列数 + ギャップ×(列数-1) + 左右パディング\n        const contentsWidth =\n          (config.folderGridCols * itemPx) +\n          ((config.folderGridCols - 1) * gapPx) +\n          padX;\n        \n        // max-widthを殺して理論幅を適用\n        contents.style.maxWidth = 'none';\n        contents.style.width = contentsWidth + 'px';\n\n        overlay.addEventListener('click', (ev) => { if (ev.target === overlay) overlay.remove(); });\n        \n        let pageHeight = slider.querySelector('.folder-page')?.offsetHeight || 0;\n        const scaleFactor = Math.max(0.1, Number(config.folderScale) / 100);\n        const dotsH = dotsContainer?.offsetHeight || 0; // 下部ドット分も高さに含める\n        const extra = chromeY(contents);\n        // デバイスの小数px丸めでの1px欠け対策として +2 を足しておくと安全\n        contents.style.height = Math.ceil(pageHeight + dotsH + extra + 2) + 'px';\n        goToPage(0);\n\n        \n        function updateFolderDimensions(){\n          const firstPage = slider.querySelector('.folder-page');\n          const pageHeight = firstPage ? firstPage.offsetHeight : 0;\n          const dotsH = dotsContainer?.offsetHeight || 0;\n          contents.style.height = Math.ceil(pageHeight + dotsH + chromeY(contents) + 2) + 'px';\n        }\n        window.addEventListener('resize', updateFolderDimensions);\n        updateFolderDimensions();\n        \n\n\n        // ホイールでページ送り（フォルダ上のみ有効）\n        let wheelLock = false;          // スクロール過多を抑制\n        const onWheel = (e) => {\n          if (totalPages <= 1) return;\n          e.preventDefault();           // 下のページをスクロールさせない\n          if (wheelLock) return;\n          wheelLock = true;\n        \n          const dir = Math.sign(e.deltaY); // 下なら +1, 上なら -1\n          if (dir > 0 && currentPage < totalPages - 1) {\n            goToPage(currentPage + 1);\n          } else if (dir < 0 && currentPage > 0) {\n            goToPage(currentPage - 1);\n          }\n          setTimeout(() => wheelLock = false, 200); // 連続ページ送りの暴発防止\n        };\n        \n        // フォルダの表示領域でだけホイールを捕捉\n        contents.addEventListener('wheel', onWheel, { passive: false });\n\n        \n        // 画面サイズや回転で高さが変化したときに再計算\n        window.addEventListener('resize', () => {\n          const firstPage = slider.querySelector('.folder-page');\n          if (!firstPage) return;\n          pageHeight = firstPage.offsetHeight;\n          contents.style.height = pageHeight + 'px';\n          goToPage(currentPage);\n        }, { passive: true });\n        // 追加（ここまで）\n\n        function updateDots() { if (!dotsContainer) return; dotsContainer.querySelectorAll('.dot').forEach((dot, i) => dot.classList.toggle('active', i === currentPage)); }\n        function goToPage(pageNumber) {\n            if (pageNumber < 0 || pageNumber >= totalPages) return;\n            currentPage = pageNumber;\n            slider.style.transform = `translateY(-${currentPage * pageHeight}px)`;\n            updateDots();\n        }\n        if(totalPages > 1) {\n            let startY, dist = 0, isDown = false;\n            const getY = (ev) => (ev.touches ? ev.touches[0].clientY : ev.clientY);\n            const start = (e) => { isDown = true; slider.style.cursor = 'grabbing'; startY = getY(e); slider.style.transition = 'none'; };\n            const end = () => { if (!isDown) return; isDown = false; slider.style.cursor = 'grab'; slider.style.transition = 'transform 0.3s ease-in-out'; if (dist > 50 && currentPage > 0) { goToPage(currentPage - 1); } else if (dist < -50 && currentPage < totalPages - 1) { goToPage(currentPage + 1); } else { goToPage(currentPage); } dist = 0; };\n            const move = (e) => { if (!isDown) return; e.preventDefault(); dist = getY(e) - startY; slider.style.transform = `translateY(${ -currentPage * pageHeight + dist }px)`; };\n            slider.addEventListener('mousedown', start);\n            slider.addEventListener('mouseup', end);\n            slider.addEventListener('mouseleave', end);\n            slider.addEventListener('mousemove', move);\n            slider.addEventListener('touchstart', start, { passive: true });\n            slider.addEventListener('touchend', end);\n            slider.addEventListener('touchmove', move, { passive: false });\n        }\n    });\n    return folder;\n  }\n  function makeDraggableAndPosition(element) {\n    element.style[config.position.yProp] = `${config.position.yVal}px`;\n    element.style[config.position.xProp] = `${config.position.xVal}px`;\n    let startX, startY, startLeft, startTop;\n    element.addEventListener('mousedown', (e) => {\n        if (e.target.closest('.custom-shortcut, .panel-controls')) return;\n        e.preventDefault();\n        const rect = element.getBoundingClientRect();\n        const scale = config.scale / 100;\n        startX = e.clientX;\n        startY = e.clientY;\n        startLeft = rect.left / scale;\n        startTop = rect.top / scale;\n        element.style.bottom = '';\n        element.style.right = '';\n        function onMouseMove(e) {\n            element.style.left = `${startLeft + ((e.clientX - startX) / scale)}px`;\n            element.style.top = `${startTop + ((e.clientY - startY) / scale)}px`;\n        }\n        function onMouseUp() {\n            document.removeEventListener('mousemove', onMouseMove);\n            document.removeEventListener('mouseup', onMouseUp);\n        }\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n    });\n  }\n  const existingPanel = document.querySelector('.custom-shortcuts-container'); if (existingPanel) existingPanel.remove();\n  const container = document.createElement('div'); container.className = \"custom-shortcuts-container panel-style\";\n  const controls = document.createElement('div'); controls.className = 'panel-controls'; const settingsBtn = document.createElement('div'); settingsBtn.className = 'settings-button'; settingsBtn.title = 'ヘルプページを開く'; const newTabBtn = document.createElement('div'); newTabBtn.className = 'control-button new-tab-btn'; newTabBtn.textContent = '+'; newTabBtn.title = '新しいタブで開く (トグル)'; const toggleModeBtn = document.createElement('div'); toggleModeBtn.className = 'control-button toggle-mode-btn'; const closeBtn = document.createElement('div'); closeBtn.className = 'control-button close-btn'; closeBtn.textContent = '✕';\n  controls.appendChild(settingsBtn); controls.appendChild(newTabBtn); controls.appendChild(toggleModeBtn); controls.appendChild(closeBtn); container.appendChild(controls);\n  settingsBtn.addEventListener('click', (e) => { e.stopPropagation(); window.open(metadata.source || 'https://gadget-otaku.github.io/Bookmarklet/HTML%E5%88%B6%E4%BD%9C/%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88%E3%83%91%E3%83%8D%E3%83%AB%E7%94%9F%E6%88%90%E3%83%BB%E7%B7%A8%E9%9B%86%E3%82%B5%E3%82%A4%E3%83%88.html', '_blank'); });\n  newTabBtn.addEventListener('click', (e) => { e.stopPropagation(); newTabMode = !newTabMode; newTabBtn.classList.toggle('active', newTabMode); });\n  toggleModeBtn.addEventListener('click', (e) => { e.stopPropagation(); applyTheme(!isDarkMode); });\n  closeBtn.addEventListener('click', (e) => { e.stopPropagation(); container.remove(); });\n  items.forEach(item => { container.appendChild(item.isFolder ? createFolder(item) : createShortcut(item)); });\n  document.body.appendChild(container); makeDraggableAndPosition(container);\n  let finalThemeIsDark = (baseTextColor === 'black');\n  const currentUrl = window.location.href;\n  if (urlRules && urlRules.length > 0) { for (const rule of urlRules) { if (rule.url && currentUrl.startsWith(rule.url)) { finalThemeIsDark = (rule.color === 'black'); break; } } }\n  applyTheme(finalThemeIsDark);\n  const styleTag = document.createElement('style'); styleTag.textContent = styleText; document.head.appendChild(styleTag);\n})();"}],"favorites":["X詳細検索","X"],"autoExpandRules":[{"url":"https://x.com/","folderName":"X"}],"githubLinks":[{"name":"X詳細検索","url":"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/x-search-panel.js"},{"name":"ショートカットパネル","url":"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pc_base_shortcutpanel.js"}],"settings":{"trigger":"transparent","position":{"top":"0px","left":"0px"},"buttonSize":"30px","cursorArea":{"width":"30px","height":"30px"},"hotkey":"a","panelPosition":{"vertical":"top","horizontal":"left"},"displayRules":"all","customStyle":false,"githubToken":"","githubRepo":"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/toolpanel_data.json"}}