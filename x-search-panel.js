javascript:/* MULTIGEN_METADATA: [{"type":"javascript","fileName":"x-search-panel","position":{"yProp":"top","yVal":"10","xProp":"left","xVal":"10"}},{"type":"userscript_button","fileName":"Phone_X_toolpanel.user","position":{"yProp":"bottom","yVal":"10","xProp":"right","xVal":"10"},"name":"Phone_X_toolpanel.user","version":"1.5","downloadURL":"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/Phone_X_toolpanel.user.js","updateURL":"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/Phone_X_toolpanel.user.js","urls":[{"type":"match","url":"https://x.com/*"}],"mode":"button","button":{"displayMode":"fixed","display":{"top":"15","left":"50","bottom":"35","right":"70"},"cursor":{"top":"0","left":"0","bottom":"30","right":"30"},"contentType":"default"}},{"type":"toolpanel_button","fileName":"pctool.user","position":{"yProp":"top","yVal":"10","xProp":"left","xVal":"10"},"name":"pctool.user","version":"1.1.32","downloadURL":"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pctool.user.js","updateURL":"https://github.com/Gadget-Otaku/Bookmarklet/blob/main/pctool.user.js","urls":[{"type":"match","url":"http*://*\/*"}],"mode":"button","button":{"displayMode":"transparent","display":{"top":"0","left":"0","bottom":"30","right":"30"},"cursor":{"top":"0","left":"0","bottom":"30","right":"30"},"contentType":"default"},"buttonName":"リスト付きX詳細検索"}] */
(function(){if(document.getElementById('x-search-panel-container')){document.getElementById('x-search-panel-container').remove();return}const panelData={"lists":[{"listName":"チェック","accounts":[{"displayName":"いけこう","username":"evjfeulgs1121"},{"displayName":"ふさふさ","username":"Hage6741"},{"displayName":"ゆんゆん","username":"ILove_Galaxy"},{"displayName":"ゆきっち","username":"yukicchi_world"},{"displayName":"あおと","username":"aoto_sumaho"},{"displayName":"ENJUMARU","username":"En__usagi"},{"displayName":"じぇお","username":"dgetmobile"},{"displayName":"吉田製作所","username":"netatank"},{"displayName":"次元を超えし者","username":"dim_lurker"}]},{"listName":"Samsung","accounts":[{"displayName":"Nullpo","username":"Nullpo_x3100"},{"displayName":"ねみぃ","username":"nemy_new"},{"displayName":"Sam","username":"MBH_N49"},{"displayName":"カロン","username":"karon_pad"},{"displayName":"あほぴた","username":"_TadaHima_"},{"displayName":"RoketLake-Sおじさん","username":"3950x"},{"displayName":"しばもん","username":"monsivamon"}]},{"listName":"海外","accounts":[{"displayName":"Anthony","username":"TheGalox_"},{"displayName":"CID","username":"CIDSAMSUNG57805"},{"displayName":"Into Galaxy","username":"IntoGalaxyy"},{"displayName":"Holly - I like tech","username":"AnxiousHolly"},{"displayName":"álen söny (소니 알렌)","username":"choehau_alen"},{"displayName":"Noah Cat","username":"Cartidise"},{"displayName":"Alvin","username":"sondesix"},{"displayName":"NMPS","username":"FamilyTaes"},{"displayName":"Galaxy AI","username":"GalaxyyAI"},{"displayName":"Apple Mis-Intelligence","username":"apple_inte"},{"displayName":"Pixel Gamer 4k","username":"4k_isn"},{"displayName":"Def64Gamer","username":"Def64Gamer"}]},{"listName":"ガジェット有識者","accounts":[{"displayName":"IceUniverse","username":"UniverseIce"},{"displayName":"ピュアセル","username":"ML_Autofocus"},{"displayName":"nakajimegame","username":"nakajimegame"},{"displayName":"ASUS好きのZenBlog","username":"ASUS_ZenBlog"},{"displayName":"すまほん","username":"sm_hn"},{"displayName":"はやぽん","username":"Hayaponlog"},{"displayName":"Tovi","username":"ToviWorks"},{"displayName":"モバイルドットコム","username":"chehonz201"}]},{"listName":"IT有識者","accounts":[{"displayName":"Kdroidwin","username":"Kdroidwin1"},{"displayName":"ChatGPT研究所","username":"ctgptlb"},{"displayName":"ぷらぐら","username":"YukkuriAIch"}]},{"listName":"Apple信者","accounts":[{"displayName":"Sassy","username":"GoApFaAmMi"},{"displayName":"水麻呂","username":"mizumaro_gadget"},{"displayName":"うすしお","username":"utthi_sub"},{"displayName":"はむさんど","username":"hamu_3nd"},{"displayName":"Nao","username":"Nao_9615"},{"displayName":"なー","username":"remonsawa_umai"}]},{"listName":"不穏分子","accounts":[{"displayName":"kai","username":"snapdragon_kai"},{"displayName":"KAI","username":"KAI90985198"}]}],"shortcuts":[{"shortcutName":"Samsung","searchMethod":"OR","keyword1":"galaxy","keyword2":"one ui","keyword3":"samsung"},{"shortcutName":"Android iOS","searchMethod":"AND","keyword1":"android","keyword2":"ios"}]};const panelCSS=`:root{--bg:#e6f0ff;--text:#003366;--border:#99c2ff;--input-bg:#f0f0f0;--input-text:#000;--btn-bg:#4da6ff;--btn-text:#fff;--accent-bg:#1a75ff;--accent-text:#fff;--list-bg:#d4e4ff;}@media (prefers-color-scheme:dark){:root{--bg:#1a3d66;--text:#e6f0ff;--border:#4d79b3;--input-bg:#333;--input-text:#fff;--btn-bg:#1a75ff;--list-bg:#254d80;}}#x-search-panel-container{color:var(--text);background-color:var(--bg);position:fixed;top: 10px; left: 10px;border:1px solid var(--border);border-radius:8px;padding:10px;z-index:9999;font-size:12px;width:90%;max-width:380px;box-shadow:0 4px 12px rgba(0,0,0,.25);box-sizing:border-box;font-family:sans-serif}.x-panel-screen{display:none}.x-panel-screen.active{display:block}.x-panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;border-bottom:1px solid var(--border);padding-bottom:5px}.x-panel-header .x-panel-title-container{display:flex;align-items:center;gap:8px}#x-panel-settings-btn{color:var(--text);background:0;border:0;font-size:20px;cursor:pointer;padding:0;line-height:1}.x-panel-header h3{margin:0}.x-panel-lists-container{display:flex;overflow-x:auto;padding-bottom:8px;margin-bottom:8px;gap:12px}.x-panel-list{flex:0 0 31%;min-width:90px}.x-panel-list h4{margin:0 0 4px 0;font-size:13px}.x-panel-users,.x-panel-shortcuts{max-height:120px;overflow-y:auto;border:1px solid var(--border);background-color:var(--list-bg);padding:5px;border-radius:4px}.x-panel-user label,.x-panel-shortcut label{display:block;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.x-panel-footer{margin-top:10px;display:flex;flex-wrap:wrap;gap:8px}.x-panel-footer button{flex-grow:1;padding:6px;border:1px solid var(--border);background:var(--btn-bg);color:var(--btn-text);border-radius:4px;cursor:pointer;font-size:11px}.x-panel-close-btn,.x-panel-back-btn{color:var(--text);background:0;border:0;font-size:18px;cursor:pointer;padding:0 5px}.x-panel-fromto-group label{display:block;font-size:12px}hr{border-color:var(--border);border-style:solid;border-width:1px 0 0 0}.x-search-form-wrapper{max-height:300px;overflow-y:auto;padding-right:8px;margin-top:8px}.x-search-form div{margin-bottom:6px}.x-search-form label{font-weight:700;margin-bottom:2px;font-size:11px;display:block}#x-search-form input,#x-search-form select,#x-search-form textarea{color:var(--input-text)!important;background-color:var(--input-bg)!important;width:95%;padding:5px;border:1px solid var(--border);border-radius:4px;font-size:12px}.checkbox-group{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:10px}.checkbox-group label{justify-content:flex-start}.checkbox-group input[type=checkbox]{width:auto!important}#x-search-form-final-btn{width:100%;padding:8px;background:var(--accent-bg);color:var(--accent-text);border:0;font-size:14px;font-weight:700;margin-top:5px}`;/* ... (The rest of the original panel's JS logic remains unchanged) ... */const panelContainer=document.createElement('div');panelContainer.id='x-search-panel-container';panelContainer.innerHTML=`<style>${panelCSS}</style><div id="list-screen" class="x-panel-screen active"><div class="x-panel-header"><div class="x-panel-title-container"><button id="x-panel-settings-btn">⚙️</button><h3>リスト</h3></div><button class="x-panel-close-btn">☒</button></div><div class="x-panel-lists-container">${panelData.lists.map(list=>`<div class="x-panel-list"><h4>${list.listName}</h4><div class="x-panel-users">${list.accounts.map(acc=>`<div class="x-panel-user"><label><input type="checkbox" name="user-select" value="${acc.username}"> ${acc.displayName}</label></div>`).join('')}</div></div>`).join('')}</div><div class="x-panel-fromto-group"><label><input type="radio" name="from-to-mode" value="from" id="radio-from"> from:</label><label><input type="radio" name="from-to-mode" value="to" id="radio-to"> to:</label><label><input type="radio" name="from-to-mode" value="from_to" id="radio-from_to"> from:↔to:</label><span id="from-to-display"></span></div><hr style="margin:8px 0"><h4>ショートカット</h4><div class="x-panel-shortcuts">${panelData.shortcuts.map(sc=>`<div class="x-panel-shortcut"><label><input type="radio" name="shortcut-select" value="${sc.shortcutName}"> ${sc.shortcutName}</label></div>`).join('')}</div><div class="x-panel-footer"><button type="button" id="profile-btn">プロフへ</button><button type="button" id="copy-user-btn">垢名コピー</button><button type="button" id="copy-all-btn">垢名抽出</button><button type="button" id="show-advanced-search-btn" style="background:var(--accent-bg);color:var(--accent-text);font-weight:700">詳細検索へ</button></div></div><div id="advanced-search-screen" class="x-panel-screen"><div class="x-panel-header"><button class="x-panel-back-btn" type="button">←戻る</button><h3>詳細検索</h3></div><form id="x-search-form" onsubmit="return false"><div class="x-search-form-wrapper"><div><label>ユーザー名:</label><input type="text" id="final-user"></div><div><label>from:</label><input type="text" id="final-from"></div><div><label>to:</label><input type="text" id="final-to"></div><div><label>検索方法:</label><select id="final-searchMethod"><option value="">選択しない</option><option value="AND">AND</option><option value="OR">OR</option></select></div><div><label>キーワード:</label><input type="text" id="final-keyword1"><input type="text" id="final-keyword2" style="margin-top:2px"><input type="text" id="final-keyword3" style="margin-top:2px"></div><div><label>完全に一致:</label><input type="text" id="final-exactPhrase"></div><div><label>除外ワード:</label><input type="text" id="final-exclude1"><input type="text" id="final-exclude2" style="margin-top:2px"><input type="text" id="final-exclude3" style="margin-top:2px"></div><div><label>いつから:</label><input type="date" id="final-since"></div><div><label>いつまで:</label><input type="date" id="final-until"></div><div><label>いいね数(以上):</label><input type="number" id="final-minFaves"></div><div><label>リプライ数(以上):</label><input type="number" id="final-minReplies"></div><div><label>リツイート数(以上):</label><input type="number" id="final-minRetweets"></div><div><label>言語:</label><select id="final-lang"><option value="">指定なし</option><option value="ja">日本語</option><option value="en">英語</option></select></div><div class="checkbox-group"><label><input type="checkbox" id="final-imagesOnly">画像のみ</label><label><input type="checkbox" id="final-videosOnly">動画のみ</label><label><input type="checkbox" id="final-followerOnly">フォロワーのみ</label><label><input type="checkbox" id="final-excludeLang">指定言語を除外</label></div></div><button type="button" id="x-search-form-final-btn">検索</button></form></div>`;document.body.appendChild(panelContainer);const q=s=>panelContainer.querySelector(s),qAll=s=>panelContainer.querySelectorAll(s);const switchScreen=id=>{qAll('.x-panel-screen').forEach(s=>s.classList.remove('active'));q(`#${id}`).classList.add('active')};q('.x-panel-close-btn').onclick=()=>panelContainer.remove();q('.x-panel-back-btn').onclick=()=>switchScreen('list-screen');q('#x-panel-settings-btn').onclick=()=>window.open('https://sites.google.com/view/x-advanced-panel-generator/%E3%83%9B%E3%83%BC%E3%83%A0','_blank');const displaySpan=q('#from-to-display'),updateFromToDisplay=()=>{const mode=q('input[name="from-to-mode"]:checked')?.value,selected=Array.from(qAll('input[name="user-select"]:checked'));displaySpan.innerHTML='';displaySpan.dataset.from='';displaySpan.dataset.to='';if(!mode)return;if((mode==='from'||mode==='to')&&selected.length>1){alert('from:かto:はユーザー1人のみ選択可能です。');q('input[name="from-to-mode"]:checked').checked=false;return}if(mode==='from_to'){if(selected.length!==2){alert('from: to: はユーザー2人の選択が必要です。');q('input[name="from-to-mode"]:checked').checked=false;return}const users=selected.map(cb=>cb.value);displaySpan.dataset.from=users[0];displaySpan.dataset.to=users[1];displaySpan.innerHTML=` from:${users[0]} <button type="button" id="swap-users-btn" style="border:0;background:0;cursor:pointer;color:var(--text)">↔</button> to:${users[1]}`}};qAll('input[name="user-select"]').forEach(cb=>cb.onchange=()=>{if(Array.from(qAll('input[name="user-select"]:checked')).length>2){alert('ユーザーは2人までです');cb.checked=false}updateFromToDisplay()});let lastCheckedFromTo='radio-from';q('#radio-from').checked=true;qAll('input[name="from-to-mode"]').forEach(radio=>radio.addEventListener('click',e=>{if(e.target.id===lastCheckedFromTo&&e.target.checked){e.target.checked=false;lastCheckedFromTo=null}else{lastCheckedFromTo=e.target.id}updateFromToDisplay()}));displaySpan.onclick=e=>{if(e.target.id==='swap-users-btn'){const from=displaySpan.dataset.from,to=displaySpan.dataset.to;displaySpan.dataset.from=to;displaySpan.dataset.to=from;displaySpan.innerHTML=` from:${to} <button type="button" id="swap-users-btn" style="border:0;background:0;cursor:pointer;color:var(--text)">↔</button> to:${from}`}};q('#profile-btn').onclick=()=>{const s=Array.from(qAll('input[name="user-select"]:checked'));if(s.length!==1)return alert('ユーザーを1人選択してください');location.href=`https://x.com/${s[0].value}`};q('#copy-user-btn').onclick=()=>{const s=Array.from(qAll('input[name="user-select"]:checked'));if(s.length!==1)return alert('ユーザーを1人選択してください');navigator.clipboard.writeText(s[0].value).then(()=>alert('コピー: '+s[0].value))};q('#copy-all-btn').onclick=()=>{const currentUrl=window.location.href;const match=currentUrl.match(/https:\/\/x\.com\/([^\/]+)/);if(!match||!match[1])return alert('このページからユーザー名を抽出できません');const username=match[1];navigator.clipboard.writeText(username).then(()=>alert('ユーザー名をコピーしました: '+username))};q('#show-advanced-search-btn').onclick=()=>{q('#x-search-form').reset();let p={};const scName=q('input[name="shortcut-select"]:checked')?.value;if(scName)p={...(panelData.shortcuts.find(sc=>sc.shortcutName===scName)||{})};const ftMode=q('input[name="from-to-mode"]:checked')?.value,selUsers=Array.from(qAll('input[name="user-select"]:checked')).map(cb=>cb.value);if(ftMode){delete p.user;delete p.fromUser;delete p.toUser;if(ftMode==='from'&&selUsers.length===1)p.fromUser=selUsers[0];if(ftMode==='to'&&selUsers.length===1)p.toUser=selUsers[0];if(ftMode==='from_to'&&selUsers.length===2){p.fromUser=displaySpan.dataset.from;p.toUser=displaySpan.dataset.to}}else if(selUsers.length===1)p.user=selUsers[0];else if(selUsers.length>1)return alert('ユーザー2人選択時は from/to を指定してください');const setVal=(id,val)=>{const e=q(`#final-${id}`);if(e)e.value=val||''};const setCheck=(id,val)=>{const e=q(`#final-${id}`);if(e)e.checked=!!val};setVal('user',p.user);setVal('from',p.fromUser);setVal('to',p.toUser);setVal('searchMethod',p.searchMethod);setVal('keyword1',p.keyword1);setVal('keyword2',p.keyword2);setVal('keyword3',p.keyword3);setVal('exactPhrase',p.exactPhrase);setVal('exclude1',p.exclude1);setVal('exclude2',p.exclude2);setVal('exclude3',p.exclude3);setVal('since',p.since);setVal('until',p.until);setVal('minFaves',p.minFaves);setVal('minReplies',p.minReplies);setVal('minRetweets',p.minRetweets);setVal('lang',p.lang);setCheck('imagesOnly',p.imagesOnly);setCheck('videosOnly',p.videosOnly);setCheck('followerOnly',p.followerOnly);setCheck('excludeLang',p.excludeLang);switchScreen('advanced-search-screen')};q('#x-search-form-final-btn').onclick=()=>{const v=id=>q(`#final-${id}`).value,c=id=>q(`#final-${id}`).checked,parts=[];const user=v('user'),from=v('from'),to=v('to');if(user&&(from||to))return alert('ユーザー名とfrom/toは同時に使用できません');if(user)parts.push(encodeURIComponent(user));if(from)parts.push(`from:${from}`);if(to)parts.push(`to:${to}`);const kws=[v('keyword1'),v('keyword2'),v('keyword3')].filter(Boolean);if(kws.length>0)parts.push(`(${kws.map(k=>`"${k}"`).join(` ${v('searchMethod')||' '} `)})`);if(v('exactPhrase'))parts.push(`"${v('exactPhrase')}"`);[v('exclude1'),v('exclude2'),v('exclude3')].filter(Boolean).forEach(ex=>parts.push(`-${ex}`));if(v('since'))parts.push(`since:${v('since')}`);if(v('until'))parts.push(`until:${v('until')}`);if(v('minFaves'))parts.push(`min_faves:${v('minFaves')}`);if(v('minReplies'))parts.push(`min_replies:${v('minReplies')}`);if(v('minRetweets'))parts.push(`min_retweets:${v('minRetweets')}`);if(c('imagesOnly'))parts.push('filter:images');if(c('videosOnly'))parts.push('filter:videos');if(c('followerOnly'))parts.push('filter:follows');if(v('lang'))parts.push(`${c('excludeLang')?'-':''}lang:${v('lang')}`);location.href=`https://x.com/search?q=${encodeURIComponent(parts.join(' '))}&src=typed_query`};})()