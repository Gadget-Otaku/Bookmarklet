// ==UserScript==
// @name         ã‚¹ãƒãƒ›ç”¨ãƒ„ãƒ¼ãƒ«ãƒ‘ãƒãƒ«
// @namespace    http://tampermonkey.net/
// @version      1.0.2
// @description  Generated by Tool Panel Generator
// @author       your_name
// @match       http*://*/*
// @grant        none
// @downloadURL  https://raw.githubusercontent.com/Gadget-Otaku/Bookmarklet/main/phonetool.js
// @updateURL    https://raw.githubusercontent.com/Gadget-Otaku/Bookmarklet/main/phonetool.js
// ==/UserScript==

(function() {
    'use strict';
    document.addEventListener('keydown', (e) => {
        if (e.key === 'a') {
            (function() { const panelId = 'tool-panel-nav-' + Date.now(); if (document.getElementById(panelId)) return; const panel = document.createElement('div'); panel.id = panelId; panel.style = 'position:fixed;top:10px;left:10px;background:white;border:1px solid black;padding:10px;z-index:2147483647;box-shadow:0 0 10px rgba(0,0,0,0.3);font-family:Arial,sans-serif;min-width:200px;'; document.body.appendChild(panel); const initialData = [{"name":"1å€é€Ÿ2å€é€Ÿåˆ‡ã‚Šæ›¿ãˆ","script":"javascript:(() => {\n const video = document.querySelector('video');\n if (!video) {\n alert('å‹•ç”»ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');\n return;\n }\n const current = video.playbackRate;\n video.playbackRate = current === 1 ? 2 : 1;\n})();","children":[]},{"name":"site:æ¤œç´¢","script":"javascript:(function(){\nconst getPixivInfo = () => {\n const title = document.title;\n const match = title.match(/^#.*?\\s(.*?)\\s-\\s(.*?)ã®/);\n if (match) return { title: match[1], author: match[2] };\n return { title: '', author: '' };\n};\nconst getDmmdoujinInfo = () => {\n const title = document.title;\n const match = title.match(/^(.+)\\s*\\(([^()]+)\\)ï½œFANZAåŒäºº$/);\n if (match) return { title: match[1], author: match[2] };\n return { title: '', author: '' };\n};\nconst getDmmAVInfo = () => {\n const title = document.title;\n const match = title.match(/^(.+?)\\s([^\\s]+)\\s-\\sã‚¨ãƒ­å‹•ç”»ãƒ»ã‚¢ãƒ€ãƒ«ãƒˆãƒ“ãƒ‡ã‚ª - FANZAå‹•ç”»$/);\n if (match) return { title: match[1], author: match[2] };\n return { title: '', author: '' };\n};\nconst getMissAVInfo = () => {\n const title = document.title;\n const match = title.match();\n if (match) return { title: match[1], author: match[2] };\n return { title: '', author: '' };\n};\nconst getInfo = () => { const url = location.href; if (url.startsWith('https://www.pixiv.net/artworks/')) return getPixivInfo(); if (url.startsWith('https://www.dmm.co.jp/dc/doujin/')) return getDmmdoujinInfo(); if (url.startsWith('https://www.dmm.co.jp/digital/videoa/')) return getDmmAVInfo(); if (url.startsWith('https://www.google.co.jp/search?q=dmm')) return getMissAVInfo(); return { title: \"\", author: \"\" }; }\nconst sites=[\n{ name: \"ãƒ¢ãƒ¢ãƒ³ã‚¬\", url: \"site:momon-ga.com\" },\n{ name: \"ãƒ’ãƒˆãƒŸãƒ©\", url: \"site:hitomi.la\" },\n{ name: \"ã‚±ãƒ¢ãƒ\", url: \"site:kemono.su\" },\n{ name: \"ãƒ€ãƒ³ãƒœãƒ¼ãƒ«\", url: \"site:danbooru.donmai.us\" },\n{ name: \"MissAV\", url: \"site:missav.ws\" },\n{ name: \"MissAV (ai)\", url: \"site:missav.ai\" }\n];\nconst uiSettings=[\n{\n urlPrefix:'https://www.pixiv.net/artworks/',\n titleChecked:false,\n authorChecked:true,\n selectedSites:[1,2]\n },\n{\n urlPrefix:'https://www.dmm.co.jp/dc/doujin/',\n titleChecked:true,\n authorChecked:false,\n selectedSites:[1,2]\n },\n{\n urlPrefix:'https://www.dmm.co.jp/digital/videoa/',\n titleChecked:true,\n authorChecked:false,\n selectedSites:[5]\n },\n{\n urlPrefix:'https://www.google.com/search?q=dmm',\n titleChecked:false,\n authorChecked:false,\n selectedSites:[5]\n }\n];\n\n const popup = document.createElement('div');\n popup.style.cssText = 'position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); width:250px; padding:20px; background:#f4f4f4; border:2px solid #888; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.2); z-index:10000;';\n\n const closeButton = document.createElement('span');\n closeButton.textContent = 'â˜’';\n closeButton.style.cssText = 'position:absolute; top:10px; right:10px; cursor:pointer;';\n closeButton.onclick = () => document.body.removeChild(popup);\n popup.appendChild(closeButton);\n\n const checkboxes = sites.map((site, index) => {\n const label = document.createElement('label');\n const checkbox = document.createElement('input');\n checkbox.type = 'checkbox';\n checkbox.value = site.url;\n checkbox.setAttribute('data-index', index);\n label.appendChild(checkbox);\n label.appendChild(document.createTextNode(site.name || site.url));\n popup.appendChild(label);\n popup.appendChild(document.createElement('br'));\n return checkbox;\n });\n\n const titleChk = document.createElement('input');\n titleChk.type = 'checkbox';\n const titleLbl = document.createElement('label');\n titleLbl.appendChild(titleChk);\n titleLbl.appendChild(document.createTextNode('ã‚¿ã‚¤ãƒˆãƒ«ã‚’æŠ½å‡º'));\n popup.appendChild(titleLbl);\n popup.appendChild(document.createElement('br'));\n\n const authorChk = document.createElement('input');\n authorChk.type = 'checkbox';\n const authorLbl = document.createElement('label');\n authorLbl.appendChild(authorChk);\n authorLbl.appendChild(document.createTextNode('ä½œè€…ã‚’æŠ½å‡º'));\n popup.appendChild(authorLbl);\n popup.appendChild(document.createElement('br'));\n\n const searchBox = document.createElement('input');\n searchBox.type = 'text';\n searchBox.placeholder = 'æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰';\n searchBox.style.cssText = 'width:100%; margin-top:10px; padding:5px;';\n popup.appendChild(searchBox);\n\n const searchButton = document.createElement('button');\n searchButton.textContent = 'æ¤œç´¢';\n searchButton.style.cssText = 'position:absolute; right:10px; bottom:10px; padding:5px; cursor:pointer;';\n searchButton.onclick = function() {\n const selectedSites = checkboxes.filter(cb => cb.checked).map(cb => cb.value);\n const info = getInfo();\n let keyword = searchBox.value.trim();\n if (!keyword) {\n const parts = [];\n if (titleChk.checked && info.title) parts.push(info.title);\n if (authorChk.checked && info.author) parts.push(info.author);\n keyword = parts.join(' ');\n }\n if (selectedSites.length > 0 && keyword) {\n const query = selectedSites.join(' OR ') + ' ' + keyword;\n window.open('https://www.google.com/search?q=' + encodeURIComponent(query));\n } else {\n alert('å°‘ãªãã¨ã‚‚1ã¤ã®ã‚µã‚¤ãƒˆã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¾ãŸã¯æŠ½å‡ºå¯¾è±¡ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');\n }\n };\n popup.appendChild(searchButton);\n\n const currentUrl = location.href;\n const matchingSetting = uiSettings.find(s => currentUrl.startsWith(s.urlPrefix));\n if (matchingSetting) {\n titleChk.checked = matchingSetting.titleChecked;\n authorChk.checked = matchingSetting.authorChecked;\n const selectedIndexes = matchingSetting.selectedSites.map(n => parseInt(n) - 1).filter(n => !isNaN(n) && n < checkboxes.length);\n checkboxes.forEach((cb, index) => { cb.checked = selectedIndexes.includes(index); });\n }\n\n searchBox.addEventListener('keydown', function(e) { if (e.key === 'Enter') searchButton.onclick(); });\n document.body.appendChild(popup);\n\n})();\n","children":[]},{"name":"æ¼«ç”»é–¢é€£","script":"","isFolder":true,"children":[{"name":"å…¨è¨€èªâ‡”æ—¥æœ¬èª","script":"javascript:(function(){\n const url = window.location.href;\n \n if (url.startsWith('https://hitomi.la/artist/')) {\n let newUrl = url;\n if (url.includes('-all.html')) {\n newUrl = url.replace(/-all\\.html/, '-japanese.html');\n } else if (url.includes('-japanese.html')) {\n newUrl = url.replace(/-japanese\\.html/, '-all.html');\n }\n if (newUrl !== url) {\n window.location.href = newUrl;\n }\n return;\n }\n \n (function trySwitch(count){\n const items = document.querySelectorAll('#lang-list li');\n if (!items.length) {\n if (count < 10) {\n return setTimeout(() => trySwitch(count + 1), 100);\n }\n alert('ã“ã®ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã«æ—¥æœ¬èªç‰ˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚');\n return;\n }\n for (let i = 0; i < items.length; i++) {\n const a = items[i].querySelector('a');\n if (!a) continue;\n const txt = a.textContent.trim();\n const href = a.getAttribute('href') || '';\n const dataLang = a.getAttribute('data-language') || '';\n if (txt === 'æ—¥æœ¬èª' || href.includes('japanese') || dataLang === 'japanese') {\n a.click();\n return;\n }\n }\n alert('ã“ã®ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã«æ—¥æœ¬èªç‰ˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚');\n })(0);\n})();\n","children":[]},{"name":"ãƒãƒ³ã‚¬æ¤œç´¢","script":"javascript:(function(){window.open('https://gadget-otaku.github.io/Bookmarklet/%E3%83%9E%E3%83%B3%E3%82%AC%E6%A4%9C%E7%B4%A2', '_blank');})();","children":[]}]},{"name":"Youtubeé–¢é€£","script":"","isFolder":true,"children":[{"name":"ãƒ„ãƒ¼ãƒ«ãƒ‘ãƒãƒ«","script":" javascript:(function() {\n const panel = document.createElement('div');\n panel.style = 'position:fixed;top:300px;left:10px;background:white;border:1px solid black;padding:10px;z-index:9999;';\n document.body.appendChild(panel);\n const closeButton = document.createElement('button');\n closeButton.textContent = 'â˜’';\n closeButton.onclick = () => document.body.removeChild(panel);\n closeButton.style = 'float:right;';\n panel.appendChild(closeButton);\n \n (function() {\n const btn0 = document.createElement('button');\n btn0.textContent = \"RVXã«åˆ‡ã‚Šæ›¿ãˆ\";\n btn0.style = 'display:block;margin:5px 0;';\n btn0.onclick = function() {\n javascript:(function(){\n var videoId = window.location.search.match(/[?&]v=([^&]+)/);\n if (videoId) {\n var video = document.querySelector('video');\n var speed = video ? video.playbackRate : 1; // ç¾åœ¨ã®å†ç”Ÿé€Ÿåº¦ã‚’å–å¾—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯1ï¼‰\n var url = \"https://youtu.be/\" + videoId[1];\n window.location.href = \"intent://www.youtube.com/watch?v=\" + videoId[1] + \"&speed=\" + speed + \"#Intent;package=app.rvx.android.youtube;scheme=https;S.browser_fallback_url=\" + encodeURIComponent(url) + \";end\";\n } else {\n alert('å‹•ç”»IDãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚');\n }\n})();\n panel.style.display = 'none';\n };\n panel.appendChild(btn0);\n })();\n \n (function() {\n const btn1 = document.createElement('button');\n btn1.textContent = \"å‹•ç”»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\";\n btn1.style = 'display:block;margin:5px 0;';\n btn1.onclick = function() {\n javascript:(function(){window.location.href='intent://youtube.com/watch?v='+location.href.match(/v=([^&]+)/)[1]+'#Intent;package=org.schabi.newpipe;scheme=http;launchFlags=0x10000000;end;'})(); \n panel.style.display = 'none';\n };\n panel.appendChild(btn1);\n })();\n \n (function() {\n const btn2 = document.createElement('button');\n btn2.textContent = \"3å€é€Ÿ\";\n btn2.style = 'display:block;margin:5px 0;';\n btn2.onclick = function() {\n javascript:(function(){\n var videos = document.getElementsByTagName('video');\n for(var i=0; i<videos.length; i++){\n videos[i].playbackRate = 3.0;\n }\n})();\n panel.style.display = 'none';\n };\n panel.appendChild(btn2);\n })();\n \n (function() {\n const btn3 = document.createElement('button');\n btn3.textContent = \"ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼\";\n btn3.style = 'display:block;margin:5px 0;';\n btn3.onclick = function() {\n javascript:(function() { if (document.getElementById('videoControlPopup')) { document.getElementById('videoControlPopup').remove(); return; } const popup = document.createElement('div'); popup.id = 'videoControlPopup'; popup.style.position = 'fixed'; popup.style.bottom = '0'; popup.style.width = '100%'; popup.style.backgroundColor = '#fff'; popup.style.borderTop = '2px solid #000'; popup.style.padding = '10px'; popup.style.zIndex = '9999'; popup.style.display = 'flex'; popup.style.flexDirection = 'column'; popup.style.alignItems = 'center'; const header = document.createElement('div'); header.style.display = 'flex'; header.style.justifyContent = 'center'; header.style.alignItems = 'center'; header.style.width = '100%'; header.style.marginBottom = '10px'; const maximizeButton = document.createElement('button'); maximizeButton.textContent = 'æœ€å¤§åŒ–'; maximizeButton.style.marginRight = '10px'; maximizeButton.onclick = function() { const video = document.querySelector('video'); if (video) { video.requestFullscreen().catch(console.error); } }; const playButton = document.createElement('button'); playButton.textContent = 'å†ç”Ÿ'; playButton.style.marginRight = '10px'; playButton.onclick = function() { const video = document.querySelector('video'); if (video) video.play(); }; const stopButton = document.createElement('button'); stopButton.textContent = 'åœæ­¢'; stopButton.style.marginLeft = '10px'; stopButton.onclick = function() { const video = document.querySelector('video'); if (video) video.pause(); }; const closeButton = document.createElement('button'); closeButton.textContent = 'x'; closeButton.style.marginLeft = '5px'; closeButton.onclick = function() { popup.remove(); }; header.appendChild(maximizeButton); header.appendChild(playButton); header.appendChild(stopButton); header.appendChild(closeButton); popup.appendChild(header); const speedControls = [0.25, 0.5, 1, 2, 3]; const speedContainer = document.createElement('div'); speedContainer.style.display = 'flex'; speedContainer.style.justifyContent = 'center'; speedControls.forEach(speed => { const button = document.createElement('button'); button.textContent = `x${speed}`; button.style.margin = '5px'; button.onclick = function() { const video = document.querySelector('video'); if (video) video.playbackRate = speed; }; speedContainer.appendChild(button); }); popup.appendChild(speedContainer); const skipTimes = [-30, -10, -5, 5, 10, 30]; const skipContainer = document.createElement('div'); skipContainer.style.display = 'flex'; skipContainer.style.justifyContent = 'center'; skipTimes.forEach(time => { const button = document.createElement('button'); button.textContent = `${time > 0 ? '+' : ''}${time}`; button.style.margin = '5px'; button.onclick = function() { const video = document.querySelector('video'); if (video) video.currentTime += time; }; skipContainer.appendChild(button); }); popup.appendChild(skipContainer); document.body.appendChild(popup);})();\n panel.style.display = 'none';\n };\n panel.appendChild(btn3);\n })();\n \n (function() {\n const btn4 = document.createElement('button');\n btn4.textContent = \"å­—å¹•\";\n btn4.style = 'display:block;margin:5px 0;';\n btn4.onclick = function() {\n javascript:(function(){window.location.href='https://subtitle.to/' + window.location.href;})();\n panel.style.display = 'none';\n };\n panel.appendChild(btn4);\n })();\n \n (function() {\n const btn5 = document.createElement('button');\n btn5.textContent = \"ã‚³ãƒ¡ãƒ³ãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\";\n btn5.style = 'display:block;margin:5px 0;';\n btn5.onclick = function() {\n javascript:(function(){\n \n var commentBtn = Array.from(document.querySelectorAll('button')).find(e => e.innerText.includes('ã‚³ãƒ¡ãƒ³ãƒˆ'));\n if(commentBtn){\n commentBtn.click();\n } else {\n alert('ã‚³ãƒ¡ãƒ³ãƒˆãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ');\n }\n \n var existingBox = document.getElementById('yt-comment-filter-box');\n if(existingBox) existingBox.remove();\n \n var box = document.createElement('div');\n box.id = 'yt-comment-filter-box';\n box.style.position = 'fixed';\n box.style.top = '270px';\n box.style.left = '100px';\n box.style.background = 'rgba(255,255,255,0.9)';\n box.style.border = '1px solid #ccc';\n box.style.padding = '7px';\n box.style.zIndex = 9999;\n box.style.borderRadius = '7px';\n \n var input = document.createElement('input');\n input.type = 'text';\n input.placeholder = 'ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰';\n input.style.marginRight = '7px';\n box.appendChild(input);\n \n var btnSearch = document.createElement('button');\n btnSearch.innerText = 'æ¤œç´¢';\n btnSearch.style.marginRight = '7px';\n box.appendChild(btnSearch);\n \n var btnClose = document.createElement('button');\n btnClose.innerText = 'â˜’';\n \n btnClose.style.fontSize = '24px';\n btnClose.style.padding = '10px 15px';\n box.appendChild(btnClose);\n \n document.body.appendChild(box);\n \n btnClose.addEventListener('click', function(){\n box.remove();\n });\n \n btnSearch.addEventListener('click', function(){\n var keyword = input.value.trim();\n if(!keyword){\n alert('ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');\n return;\n }\n var comments = document.querySelectorAll('ytd-comment-thread-renderer, ytm-comment-thread-renderer');\n if(comments.length === 0){\n alert('ã‚³ãƒ¡ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');\n return;\n }\n var found = false;\n comments.forEach(function(comment){\n if(comment.innerText.toLowerCase().indexOf(keyword.toLowerCase()) !== -1){\n comment.style.display = '';\n if(!found){\n comment.scrollIntoView({behavior:'smooth', block:'start'});\n found = true;\n }\n } else {\n comment.style.display = 'none';\n }\n });\n if(!found){\n alert('ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ä¸€è‡´ã™ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ');\n }\n });\n})();\n panel.style.display = 'none';\n };\n panel.appendChild(btn5);\n })();\n \n (function() {\n const btn6 = document.createElement('button');\n btn6.textContent = \"Geminiã«è¦ç´„\";\n btn6.style = 'display:block;margin:5px 0;';\n btn6.onclick = function() {\n javascript:(function(){ \n var currentUrl = window.location.href.replace(/^https:\\/\\/m\\.youtube/, 'https://www.youtube'); \n var summaryText = 'ä»¥ä¸‹ã®å‹•ç”»ã‚’è¦ç´„ã—ã¦\\n ' + currentUrl; \n var textArea = document.createElement('textarea'); \n textArea.value = summaryText; \n document.body.appendChild(textArea); \n textArea.select(); \n document.execCommand('copy'); \n document.body.removeChild(textArea); \n window.location.href = 'https://gemini.google.com/app'; \n})();\n panel.style.display = 'none';\n };\n panel.appendChild(btn6);\n })();\n \n document.addEventListener('click', function(e) {\n if (!panel.contains(e.target)) {\n panel.style.display = 'none';\n }\n }, { capture: true });\n })();\n","children":[]},{"name":"ãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§","script":"","isFolder":true,"children":[]}]},{"name":"ä»–ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã","script":"","isFolder":true,"children":[{"name":"Braveã§é–‹ã","script":"javascript:(function(){ var u = window.location.href; var ua = navigator.userAgent; if(/android/i.test(ua)){ window.location = \"intent:\" + u.replace(/^https?:\\/\\//, \"\") + \"#Intent;package=com.brave.browser;scheme=https;end\"; } else if(/(iPhone|iPad|iPod)/i.test(ua)){ window.location = \"brave://open-url?url=\" + encodeURIComponent(u); } else { if(confirm(\"Braveã§è¡¨ç¤ºã—ã¾ã™ã‹ï¼Ÿ\")){ window.location = \"brave://open-url?url=\" + encodeURIComponent(u); } } })();","children":[]}]},{"name":"ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ‘ãƒãƒ«","script":"javascript:\n\n(function() {\n 'use strict';\n\n const config = {\n scale: 75,\n gridCols: 5,\n gridRows: 4,\n topOffset: 400,\n leftOffset: 55\n };\n\n const items = [\n {\n name: \"YouTube\",\n url: \"https://www.youtube.com\",\n icon: \"https://images.icon-icons.com/1584/PNG/512/3721679-youtube_108064.png\"\n },\n {\n name: \"X\",\n url: \"https://x.com/home\",\n icon: \"https://img.freepik.com/free-vector/new-2023-twitter-logo-x-icon-design_1017-45418.jpg\"\n },\n {\n name: \"Pixiv\",\n url: \"https://www.pixiv.net/bookmark_new_illust.php\",\n icon: \"https://play-lh.googleusercontent.com/gxketM16-WgX0BpV6Ggn1c5pL4tOk7ncum-nrXLFzx_54TlggRoFQavCwEg-haS6bPg\"\n },\n {\n name: \"ASMR\",\n url: \"https://asmr18.fans\",\n icon: \"https://www.google.com/s2/favicons?sz=64&domain_url=asmr18.fans\"\n },\n {\n name: \"åŸç¥\",\n isFolder: true,\n children: [\n {\n name: \"ãƒ¡ã‚¤ãƒ³åŠ¹æœé‡\",\n url: \"https://wikiwiki.jp/genshinwiki/%E8%81%96%E9%81%BA%E7%89%A9#ParamSubOps:~:text=%E7%B0%A1%E6%98%93%E6%97%A9%E8%A6%8B%E8%A1%A8-,%E7%A8%AE%E9%A1%9E,-%E2%98%855%0A%EF%BC%88Lv.20\",\n icon: \"https://www.google.com/s2/favicons?sz=64&domain_url=wikiwiki.jp/genshinwiki\"\n },\n {\n name: \"ã‚µãƒ–åŠ¹æœé‡\",\n url: \"https://wikiwiki.jp/genshinwiki/%E8%81%96%E9%81%BA%E7%89%A9#ParamSubOps:~:text=%E7%A0%94%E7%A9%B6%E3%82%92%E5%8F%82%E7%85%A7%E3%80%82-,%E3%82%B5%E3%83%96%E5%8A%B9%E6%9E%9C,-%E4%BD%8E\",\n icon: \"https://www.google.com/s2/favicons?sz=64&domain_url=wikiwiki.jp/genshinwiki\"\n },\n {\n name: \"lv20å¿…è¦è–éºç‰©\",\n url: \"https://wikiwiki.jp/genshinwiki/%E8%81%96%E9%81%BA%E7%89%A9#ParamSubOps\",\n icon: \"https://www.google.com/s2/favicons?sz=64&domain_url=wikiwiki.jp/genshinwiki\"\n },\n {\n name: \"lv90å¿…è¦çµŒé¨“å€¤\",\n url: \"https://kamigame.jp/genshin/page/132093570420104073.html#:~:text=%e3%81%8c%e5%b0%91%e3%81%aa%e3%81%8f%e3%81%aa%e3%82%8b%e3%80%82-,1%e3%80%9c90%e3%81%be%e3%81%a7%e3%81%ae%e5%bf%85%e8%a6%81%e7%b5%8c%e9%a8%93%e5%80%a4,-%e3%83%ac%e3%83%99%e3%83%ab\",\n icon: \"https://www.google.com/s2/favicons?sz=64&domain_url=kamigame.jp\"\n },\n {\n name: \"è–éºç‰©ã‚¹ã‚³ã‚¢\",\n url: \"https://tools.jabrek.net/Genshin_score/?uid=1800441283&type=attack\",\n icon: \"https://webstatic.hoyoverse.com/upload/uploadstatic/contentweb/20210104/2021010417060227516.png\"\n },\n {\n name: \"è‚²æˆè¨ˆç®—æ©Ÿ\",\n url: \"https://act.hoyolab.com/ys/event/calculator-sea/index.html?bbs_presentation_style=fullscreen&bbs_auth_required=true&utm_source=hoyolab&utm_medium=tools&lang=ja-jp&bbs_theme=dark&bbs_theme_device=1#/\",\n icon: \"https://www.google.com/s2/favicons?sz=64&domain_url=act.hoyolab.com\"\n },\n {\n name: \"ãƒ†ã‚¤ãƒ¯ãƒƒãƒˆãƒãƒƒãƒ—\",\n url: \"https://act.hoyolab.com/ys/app/interactive-map/?lang=ja-jp#/map/2?shown_types=410,521Â¢er=-1665.40,-6947.56&zoom=-4.50\",\n icon: \"https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://act.hoyolab.com/ys/app/interactive-map/?lang=ja-jp&size=64#/map/2?shown_types=410,521Â¢er=-1665.40,-6947.56&zoom=-4.50\"\n },\n {\n name: \"ã‚·ãƒªã‚¢ãƒ«ã‚³ãƒ¼ãƒ‰\",\n url: \"https://gamewith.jp/genshin/article/show/231856\",\n icon: \"https://www.google.com/s2/favicons?sz=64&domain_url=gamewith.jp\"\n }\n ]\n },\n {\n name: \"AI\",\n isFolder: true,\n children: [\n {\n name: \"ChatGPT\",\n url: \"https://chatgpt.com/?model=auto\",\n icon: \"https://i.pinimg.com/736x/a6/8e/fc/a68efcad5debfbe207f52e8c19b379e9.jpg\"\n },\n {\n name: \"Gemini\",\n url: \"https://gemini.google.com/app?hl=ja\",\n icon: \"https://asset.watch.impress.co.jp/img/ktw/docs/1583/273/icon_l.jpg\"\n },\n {\n name: \"DeepSeek\",\n url: \"https://chat.deepseek.com\",\n icon: \"https://play-lh.googleusercontent.com/d2zqBFBEymSZKaVg_dRo1gh3hBFn7_Kl9rO74xkDmnJeLgDW0MoJD3cUx0QzZN6jdsg\"\n }\n ]\n },\n {\n name: \"Astate\",\n url: \"https://www.astate.edu\",\n icon: \"https://www.astate.edu/dotAsset/dab6dbb0-0dae-439c-b6d6-1e729565418a.png\"\n },\n {\n name: \"Dashboard\",\n url: \"https://pack.astate.edu/public/dashboard\",\n icon: \"https://www.google.com/s2/favicons?sz=64&domain_url=pack.astate.edu\"\n },\n {\n name: \"å¤§å­¦é–¢é€£\",\n isFolder: true,\n children: [\n {\n name: \"mybill\",\n url: \"https://epay.astate.edu/C20019_tsa/web/login.jsp\",\n icon: \"https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://epay.astate.edu/C20019_tsa/web/login.jsp&size=16\"\n },\n {\n name: \"Housing\",\n url: \"https://astate.starrezhousing.com/StarRezPortalX/FC6488C4/1/1/Home-Welcome_to_the_A_Sta?UrlToken=A0AC9875\",\n icon: \"https://iconbox.fun/wp/wp-content/uploads/192_b_24.png\"\n },\n {\n name: \"ãƒã‚¹\",\n url: \"https://www.astate.edu/a/global-initiatives/international/forms/student-advising\",\n icon: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSsKEzw38TGeOe-kK91Wsvg05lgWbxyQj57DQ&s\"\n },\n {\n name: \"ï½½ï½¹ï½¼ï¾ï½­-ï¾™\",\n url: \"https://catalog.astate.edu/preview_program.php?catoid=8&poid=2347&returnto=244\",\n icon: \"https://img.icons8.com/color/512/google-logo.png\"\n },\n {\n name: \"è‹±èª æ•™æ\",\n url: \"https://asuj.grlcontent.com/user/login?autologout_timeout=1\",\n icon: \"https://play-lh.googleusercontent.com/Z567KavO3EE8mxGFtzgGrCkEtdljuySFNqxlaWACW5lcrksBUXC4CA0kHLJ0gYgoy5Y=w240-h480-rw\"\n },\n {\n name: \"æ•™æ bookstore\",\n url: \"https://astatebookstore.com/textbooks\",\n icon: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRsE604CUZK43liZCcbSISUiHL9CoMB8AJxJg&s\"\n },\n {\n name: \"vitalsource\",\n url: \"https://bookshelf.vitalsource.com/home/dashboard?context=login\",\n icon: \"https://store-images.s-microsoft.com/image/apps.15180.14164704504445663.3fbcf2df-8bab-4f09-822a-094d3f6ef53e.b6ea252f-f946-4acc-96c0-e2dc7370daf8\"\n },\n {\n name: \"é£Ÿäº‹ æ™‚é–“\",\n url: \"https://astate.sodexomyway.com/en-us/locations/\",\n icon: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQp0r7Ed3_kbqc9UumdzCIDUtuxts-qjAewBA&s\"\n }\n ]\n },\n {\n name: \"Github\",\n url: \"https://github.com\",\n icon: \"https://cdn-icons-png.freepik.com/256/733/733609.png\"\n },\n {\n name: \"GreasyFork\",\n url: \"https://greasyfork.org/ja/users/1433480-%E3%82%B9%E3%83%9E%E3%83%9B%E3%82%AA%E3%82%BF%E3%82%AF%E3%81%AB%E3%82%8F%E3%81%8B\",\n icon: \"https://files.svgcdn.io/simple-icons/greasyfork.svg\"\n },\n {\n name: \"ãƒ¡ãƒ¢å¸³2.0\",\n url: \"https://gadget-otaku.github.io/Bookmarklet/%E3%83%A1%E3%83%A2%E5%B8%B32.0\",\n icon: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTmsAZYI27WQaMCSK-W8M-1FoW4Tx-0BWk6dA&s\"\n },\n {\n name: \"åˆ¶ä½œ\",\n isFolder: true,\n children: [\n {\n name: \"(beta)Googleã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ\",\n url: \"https://gadget-otaku.github.io/Bookmarklet/(beta)Google%E3%83%9B%E3%83%BC%E3%83%A0%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%82%B7%E3%83%A7%E3%83%BC%E3%83%88%E3%82%AB%E3%83%83%E3%83%88%E3%82%AD%E3%83%BC%E9%85%8D%E7%BD%AEUserScript%E7%94%9F%E6%88%90%E3%83%BB%E7%B7%A8%E9%9B%86%E3%83%84%E3%83%BC%E3%83%AB%20JavaScript%E3%83%BB%E8%A6%AA%E9%9A%8E%E5%B1%A4%E7%A7%BB%E5%8B%95%E5%AF%BE%E5%BF%9C\",\n icon: \"https://img.icons8.com/color/512/google-sites--v2.png\"\n },\n {\n name: \"ãƒ„ãƒ¼ãƒ«ãƒ‘ãƒãƒ«\",\n url: \"https://sites.google.com/view/toolpaneleditor/%E3%83%9B%E3%83%BC%E3%83%A0\",\n icon: \"https://img.icons8.com/color/512/google-sites--v2.png\"\n },\n {\n name: \"site:æ¤œç´¢\",\n url: \"https://sites.google.com/view/site-search-multi-function/%E3%83%9B%E3%83%BC%E3%83%A0\",\n icon: \"https://img.icons8.com/color/512/google-sites--v2.png\"\n },\n {\n name: \"ã‚µã‚¤ãƒˆ\",\n url: \"https://sites.google.com/new?hl=ja\",\n icon: \"https://img.icons8.com/color/512/google-sites--v2.png\"\n },\n {\n name: \"UserScript\",\n url: \"https://sites.google.com/view/userscriptgenerator/%E3%83%9B%E3%83%BC%E3%83%A0\",\n icon: \"https://img.icons8.com/color/512/google-sites--v2.png\"\n }\n ]\n },\n {\n name: \"Notion\",\n url: \"https://www.notion.so/2f61b782539d4036bef474f820fa42c2\",\n icon: \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Notion-logo.svg/1024px-Notion-logo.svg.png\"\n },\n {\n name: \"365\",\n url: \"https://m365.cloud.microsoft/?acctsw=1&auth=1\",\n icon: \"https://cdn-dynmedia-1.microsoft.com/is/content/microsoftcorp/Icon_Copilot_64x64?resMode=sharp2&op_usm=1.5,0.65,15,0&wid=32&hei=32&qlt=100&fit=constrain\"\n },\n {\n name: \"ç¿»è¨³\",\n url: \"https://translate.google.co.jp/?hl=ja&tab=rT&sl=en&tl=ja&op=translate\",\n icon: \"https://play-lh.googleusercontent.com/ZrNeuKthBirZN7rrXPN1JmUbaG8ICy3kZSHt-WgSnREsJzo2txzCzjIoChlevMIQEA=w240-h480-rw\"\n },\n {\n name: \"ã‚¢ãƒ‰ã‚ªãƒ³\",\n isFolder: true,\n children: [\n {\n name: \"Chromeæ‹¡å¼µæ©Ÿèƒ½\",\n url: \"https://chromewebstore.google.com/category/extensions?hl=ja\",\n icon: \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/Google_Chrome_Web_Store_icon_2022.svg/2356px-Google_Chrome_Web_Store_icon_2022.svg.png\"\n },\n {\n name: \"Firefoxã‚¢ãƒ‰ã‚ªãƒ³\",\n url: \"https://addons.mozilla.org/ja/firefox/\",\n icon: \"https://play-lh.googleusercontent.com/zqsuwFUBwKRcGOSBinKQCL3JgfvOW49vJphq0ZF32aDgfqmuDyl-fEpx4Lxm4pRr7A=s256-rw\"\n },\n {\n name: \"Edgeã‚¢ãƒ‰ã‚ªãƒ³\",\n url: \"https://microsoftedge.microsoft.com/addons/Microsoft-Edge-Extensions-Home?hl=ja-jp\",\n icon: \"https://images.icon-icons.com/2429/PNG/512/microsoft_logo_icon_147261.png\"\n }\n ]\n },\n {\n name: \"IBTãƒ»TOEICãƒ»å°±æ´»\",\n isFolder: true,\n children: [\n {\n name: \"IBT\",\n url: \"https://toeflibt.ets.org/home\",\n icon: \"https://titc.or.id/wp-content/uploads/2025/04/TOEFL-IBT-Home-Edition.png\"\n }\n ]\n }\n ];\n\n const urlRules = [\n {\n \"url\": \"https://www.google.com/\",\n \"color\": \"white\"\n },\n {\n \"url\": \"https://gadget-otaku.github.io/Bookmarklet/%E3%83%A1%E3%83%A2%E5%B8%B32.0\",\n \"color\": \"black\"\n }\n];\n\n const styleText = `\n :root {\n --item-size: 72px;\n --icon-size: 40px;\n --folder-size: 40px;\n --border-radius: 12px;\n }\n .panel-style {\n background: rgba(255, 255, 255, 0.2);\n backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);\n border-radius: var(--border-radius);\n border: 1px solid rgba(255, 255, 255, 0.3);\n box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2), inset 0 1px 1px rgba(255,255,255,0.4);\n padding: 20px; position: fixed;\n }\n .custom-shortcuts-container {\n transform: scale(${config.scale / 100});\n transform-origin: top left; display: grid;\n grid-template-columns: repeat(${config.gridCols}, var(--item-size));\n grid-template-rows: repeat(${config.gridRows}, var(--item-size));\n gap: 15px; z-index: 9999; pointer-events: auto; cursor: move;\n }\n .panel-controls {\n position: absolute; top: 8px; right: 8px; display: flex; gap: 8px; cursor: default;\n }\n .control-button {\n width: 16px; height: 16px; border-radius: 50%; display: flex;\n align-items: center; justify-content: center; font-family: sans-serif;\n font-size: 12px; line-height: 16px; cursor: pointer; transition: color 0.2s;\n user-select: none; background-color: rgba(0, 0, 0, 0.7);\n }\n .settings-button {\n width: 16px; height: 16px;\n cursor: pointer;\n background-image: url('https://kotonohaworks.com/free-icons/wp-content/uploads/kkrn_icon_haguruma_1.png');\n background-size: contain;\n background-repeat: no-repeat;\n background-position: center;\n filter: invert(1);\n opacity: 0.7;\n transition: opacity 0.2s;\n }\n .settings-button:hover {\n opacity: 1;\n }\n .custom-shortcut {\n display: flex; flex-direction: column; align-items: center; justify-content: center;\n text-decoration: none; width: var(--item-size); height: var(--item-size);\n transition: all 0.2s; border-radius: var(--border-radius);\n padding: 4px; box-sizing: border-box; cursor: pointer;\n }\n .custom-shortcut:hover {\n transform: translateY(-5px); background: rgba(255,255,255,0.3);\n }\n .custom-shortcut img, .custom-shortcut .folder-icon-preview {\n width: var(--icon-size); height: var(--icon-size);\n object-fit: contain; border-radius: calc(var(--border-radius) * 0.5);\n }\n .custom-shortcut span {\n font-size: 12px; margin-top: 6px; text-align: center;\n width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\n transition: color 0.3s;\n }\n .light-text .custom-shortcut span, .light-text .control-button { color: white !important; }\n .dark-text .custom-shortcut span, .dark-text .control-button { color: black !important; }\n .custom-folder .folder-icon-preview {\n display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);\n gap: 2px; padding: 2px; width: var(--folder-size); height: var(--folder-size);\n background: rgba(0,0,0,0.1); border-radius: var(--border-radius);\n }\n .folder-icon-preview .preview-icon {\n width: 95%; height: 95%; background-size: contain;\n background-repeat: no-repeat; background-position: center; border-radius: 4px;\n }\n .folder-contents-overlay {\n position: fixed; top: 0; left: 0; width: 100%; height: 100%;\n background: rgba(0,0,0,0); backdrop-filter: blur(0px); -webkit-backdrop-filter: blur(0px);\n z-index: 10000; display: flex; align-items: center; justify-content: center;\n animation: blurFadeIn 0.3s ease-out forwards;\n }\n .folder-contents {\n display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; max-width: 400px;\n transform: scale(0.8); opacity: 0; animation: scaleUp 0.15s ease-out 0.05s forwards;\n position: relative;\n }\n @keyframes scaleUp { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }\n @keyframes blurFadeIn { to { background: rgba(0,0,0,0); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px); } }\n @keyframes blurFadeOut { from { background: rgba(0,0,0,0); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px); } to { background: rgba(0,0,0,0); backdrop-filter: blur(0px); -webkit-backdrop-filter: blur(0px); } }\n @keyframes scaleDown { from { transform: scale(1); opacity: 1; } to { transform: scale(0.8); opacity: 0; } }\n .folder-contents-overlay.closing { animation: blurFadeOut 0.3s ease-out forwards; }\n .folder-contents.closing { animation: scaleDown 0.3s ease-in forwards; }\n `;\n\n let isDarkMode = false;\n const container = document.createElement('div');\n const controls = document.createElement('div');\n const settingsBtn = document.createElement('div');\n const toggleModeBtn = document.createElement('div');\n\n function applyTheme(isDark) {\n isDarkMode = isDark;\n container.classList.toggle('dark-text', isDarkMode);\n container.classList.toggle('light-text', !isDarkMode);\n toggleModeBtn.textContent = isDarkMode ? 'â—' : 'â—¯';\n }\n\n function createShortcut(item) {\n const link = document.createElement('a');\n link.href = item.url;\n link.className = \"custom-shortcut\";\n const img = document.createElement('img');\n try {\n img.src = item.icon || `https://www.google.com/s2/favicons?sz=64&domain_url=${new URL(item.url).hostname}`;\n } catch(e) { img.src = ''; }\n img.alt = item.name;\n img.onerror = (e) => { e.target.src = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='; };\n const span = document.createElement('span');\n span.textContent = item.name;\n link.appendChild(img);\n link.appendChild(span);\n return link;\n }\n\n function createFolder(item) {\n const folder = document.createElement('div');\n folder.className = \"custom-shortcut custom-folder\";\n const preview = document.createElement('div');\n preview.className = 'folder-icon-preview';\n item.children.slice(0, 9).forEach(child => {\n if (child.icon) {\n const iconDiv = document.createElement('div');\n iconDiv.className = 'preview-icon';\n iconDiv.style.backgroundImage = `url(${child.icon})`;\n preview.appendChild(iconDiv);\n }\n });\n const span = document.createElement('span');\n span.textContent = item.name;\n folder.appendChild(preview);\n folder.appendChild(span);\n folder.addEventListener('click', (e) => {\n e.stopPropagation();\n const overlay = document.createElement('div');\n overlay.className = 'folder-contents-overlay';\n const contents = document.createElement('div');\n contents.className = 'folder-contents panel-style';\n contents.classList.toggle('dark-text', isDarkMode);\n contents.classList.toggle('light-text', !isDarkMode);\n item.children.forEach(child => {\n if (!child.isFolder) { contents.appendChild(createShortcut(child)); }\n });\n overlay.appendChild(contents);\n document.body.appendChild(overlay);\n overlay.addEventListener('click', (ev) => {\n if (ev.target === overlay) {\n overlay.classList.add('closing');\n contents.classList.add('closing');\n overlay.addEventListener('animationend', () => overlay.remove(), { once: true });\n }\n });\n });\n return folder;\n }\n\n container.className = \"custom-shortcuts-container panel-style\";\n controls.className = 'panel-controls';\n settingsBtn.className = 'settings-button';\n toggleModeBtn.className = 'control-button toggle-mode-btn';\n const closeBtn = document.createElement('div');\n closeBtn.className = 'control-button close-btn';\n closeBtn.textContent = 'âœ•';\n controls.appendChild(settingsBtn);\n controls.appendChild(toggleModeBtn);\n controls.appendChild(closeBtn);\n container.appendChild(controls);\n\n toggleModeBtn.addEventListener('click', (e) => { e.stopPropagation(); applyTheme(!isDarkMode); });\n closeBtn.addEventListener('click', (e) => { e.stopPropagation(); container.style.display = 'none'; });\n\n // è¨­å®šãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ\n settingsBtn.addEventListener('click', (e) => {\n e.stopPropagation();\n\n // JSON.stringifyã®çµæœã‹ã‚‰ã‚­ãƒ¼ã®ãƒ€ãƒ–ãƒ«ã‚¯ã‚ªãƒ¼ãƒˆã‚’å‰Šé™¤\n const configString = JSON.stringify(config, null, 4).replace(/\"([^\"]+)\":/g, '$1:');\n\n // è¨­å®šãƒ‡ãƒ¼ã‚¿ã‚’æ–‡å­—åˆ—ã¨ã—ã¦ç”Ÿæˆ\n const textToCopy =\n`const config = ${configString};\n\nconst items = ${JSON.stringify(items, null, 4)};\n\nconst urlRules = ${JSON.stringify(urlRules, null, 4)};`;\n\n // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼å‡¦ç†\n const textarea = document.createElement('textarea');\n textarea.value = textToCopy;\n textarea.style.position = 'fixed';\n textarea.style.top = '-9999px';\n textarea.style.left = '-9999px';\n document.body.appendChild(textarea);\n textarea.select();\n\n let copySuccess = false;\n try {\n copySuccess = document.execCommand('copy');\n } catch (err) {\n console.error('è¨­å®šã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', err);\n copySuccess = false;\n } finally {\n document.body.removeChild(textarea);\n }\n\n // çµæœã‚’é€šçŸ¥ã—ã€ãƒšãƒ¼ã‚¸ã‚’é–‹ãã‹ç¢ºèª\n if (copySuccess) {\n if (confirm('è¨­å®šã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚\\n\\nOKã‚’æŠ¼ã™ã¨ã€è¨­å®šæ–¹æ³•ã‚’èª¬æ˜ã—ãŸãƒšãƒ¼ã‚¸ã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã™ã€‚')) {\n window.open('https://sites.google.com/view/homepage-custom-shortcut/%E3%83%9B%E3%83%BC%E3%83%A0', '_blank');\n }\n } else {\n if (confirm('è¨­å®šã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\\nãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚„æ‹¡å¼µæ©Ÿèƒ½ã®è¨­å®šã«ã‚ˆã‚Šã€ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚ŒãŸå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\\n\\nOKã‚’æŠ¼ã™ã¨ã€è¨­å®šæ–¹æ³•ã‚’èª¬æ˜ã—ãŸãƒšãƒ¼ã‚¸ã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã™ã€‚æ‰‹å‹•ã§è¨­å®šã‚’ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚')) {\n window.open('https://sites.google.com/view/homepage-custom-shortcut/%E3%83%9B%E3%83%BC%E3%83%A0', '_blank');\n }\n }\n });\n\n items.slice(0, config.gridCols * config.gridRows).forEach(item => {\n container.appendChild(item.isFolder ? createFolder(item) : createShortcut(item));\n });\n\n function makeDraggableAndPosition(element) {\n setTimeout(() => {\n const scale = config.scale / 100;\n const rect = element.getBoundingClientRect();\n const containerWidth = rect.width / scale;\n const initialLeft = (window.innerWidth / 2) + config.leftOffset - (containerWidth / 2);\n element.style.left = `${initialLeft}px`;\n element.style.top = `${config.topOffset}px`;\n }, 0);\n let startX, startY, startLeft, startTop;\n element.addEventListener('mousedown', (e) => {\n if (e.target.closest('.custom-shortcut, .panel-controls')) { return; }\n e.preventDefault();\n const scale = config.scale / 100;\n startX = e.clientX; startY = e.clientY;\n startLeft = element.offsetLeft; startTop = element.offsetTop;\n function onMouseMove(e) {\n element.style.left = `${startLeft + ((e.clientX - startX) / scale)}px`;\n element.style.top = `${startTop + ((e.clientY - startY) / scale)}px`;\n }\n function onMouseUp() {\n document.removeEventListener('mousemove', onMouseMove);\n document.removeEventListener('mouseup', onMouseUp);\n }\n document.addEventListener('mousemove', onMouseMove);\n document.addEventListener('mouseup', onMouseUp);\n });\n }\n\n // --- Initialization ---\n document.body.appendChild(container);\n makeDraggableAndPosition(container);\n\n let initialThemeIsDark = false;\n const currentUrl = window.location.href;\n let ruleApplied = false;\n\n if (urlRules && urlRules.length > 0) {\n for (const rule of urlRules) {\n if (currentUrl === rule.url) {\n initialThemeIsDark = (rule.color === 'black');\n ruleApplied = true;\n break;\n }\n }\n }\n\n if (!ruleApplied) {\n if (currentUrl.endsWith('/1')) { initialThemeIsDark = true; }\n else if (currentUrl.endsWith('/0')) { initialThemeIsDark = false; }\n }\n\n applyTheme(initialThemeIsDark);\n\n const styleTag = document.createElement('style');\n styleTag.textContent = styleText;\n document.head.appendChild(styleTag);\n})();\n","children":[]}]; let history = [initialData]; function createExpandableItem(data, container) { if (data.children && data.children.length > 0) { const folder = document.createElement('div'); const folderBtn = document.createElement('button'); folderBtn.textContent = 'â–½ ' + data.name; folderBtn.style = 'display:block;margin:5px 0;background:#ADD8E6;color:black;padding:5px 10px;width:100%;text-align:left;border:none;cursor:pointer;'; const childContainer = document.createElement('div'); childContainer.style.display = 'none'; childContainer.style.paddingLeft = '15px'; folder.appendChild(folderBtn); folder.appendChild(childContainer); folderBtn.onclick = function() { const isHidden = childContainer.style.display === 'none'; childContainer.style.display = isHidden ? 'block' : 'none'; folderBtn.textContent = (isHidden ? 'â–³ ' : 'â–½ ') + data.name; }; data.children.forEach(child => createExpandableItem(child, childContainer)); container.appendChild(folder); } else { const btn = document.createElement('button'); btn.textContent = data.name; btn.style = 'display:block;margin:5px 0;background:#4a90e2;color:white;padding:5px 10px;width:100%;text-align:left;border:none;cursor:pointer;'; btn.onclick = function() { try { eval(data.script); } catch (e) { console.error('Script Error:', e); } const topPanel = document.getElementById(panelId); if(topPanel) topPanel.style.display = 'none'; }; container.appendChild(btn); } } function render() { const currentItems = history[history.length - 1]; panel.innerHTML = ''; const closeButton = document.createElement('button'); closeButton.textContent = 'â˜’'; closeButton.style = 'float:right;background:transparent;border:none;font-size:16px;cursor:pointer;line-height:1;padding:0 0 5px 5px;'; closeButton.onclick = () => document.body.removeChild(panel); panel.appendChild(closeButton); if (history.length > 1) { const backButton = document.createElement('button'); backButton.textContent = 'â† Back'; backButton.style = 'display:block;margin:5px 0;background:#6c757d;color:white;padding:5px 10px;width:100%;text-align:left;border:none;cursor:pointer;'; backButton.onclick = () => { history.pop(); render(); }; panel.appendChild(backButton); } currentItems.forEach(item => { if (item.isFolder) { const folderBtn = document.createElement('button'); folderBtn.textContent = 'ğŸ“ ' + item.name; folderBtn.style = 'display:block;margin:5px 0;background:#87CEEB;color:black;padding:5px 10px;width:100%;text-align:left;border:none;cursor:pointer;'; folderBtn.onclick = () => { history.push(item.children || []); render(); }; panel.appendChild(folderBtn); } else { createExpandableItem(item, panel); } }); } document.addEventListener('click', (e) => { if (panel && !panel.contains(e.target) && panel.style.display !== 'none') { panel.style.display = 'none'; } }, true); render(); })()
        }
    });
})();