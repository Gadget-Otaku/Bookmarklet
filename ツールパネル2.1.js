javascript:(function() {const panel = document.createElement('div');panel.style = 'position:fixed;top:10px;left:10px;background:white;border:1px solid black;padding:10px;z-index:9999;box-shadow:0 0 10px rgba(0,0,0,0.3);font-family:Arial, sans-serif;';document.body.appendChild(panel);const closeButton = document.createElement('button');closeButton.textContent = '☒';closeButton.onclick = () => document.body.removeChild(panel);closeButton.style = 'float:right;background:transparent;border:none;font-size:16px;cursor:pointer;';panel.appendChild(closeButton);function createItem(data, container) {if (data.children && data.children.length > 0) {const folder = document.createElement('div');const folderBtn = document.createElement('button');folderBtn.textContent = '▽ ' + data.name;folderBtn.style = 'display:block;margin:5px 0;background:#ADD8E6;color:black;padding:5px 10px;width:100%;text-align:left;border:none;cursor:pointer;';const childContainer = document.createElement('div');childContainer.style.display = 'none';folder.appendChild(folderBtn);folder.appendChild(childContainer);folderBtn.onclick = function() {childContainer.style.display = childContainer.style.display === 'none' ? 'block' : 'none';folderBtn.textContent = (childContainer.style.display === 'none' ? '▽ ' : '△ ') + data.name;};data.children.forEach(child => createItem(child, childContainer));container.appendChild(folder);} else {const btn = document.createElement('button');btn.textContent = data.name;btn.style = 'display:block;margin:5px 0;background:#4a90e2;color:white;padding:5px 10px;width:100%;text-align:left;border:none;cursor:pointer;';btn.onclick = function() {try {eval(data.script);} catch(e) {console.error('スクリプト実行エラー:', e);}panel.style.display = 'none';};container.appendChild(btn);}}createItem({"name":"メモ帳","script":"","children":[{"name":"メモ帳(github)","script":"javascript:(function(){window.open('https://github.com/Gadget-Otaku/Bookmarklet/blob/main/%E3%83%A1%E3%83%A2%E5%B8%B32.0.html', '_blank');})();","children":[]},{"name":"メモ帳エディター","script":"javascript:(function(){window.open('https://gadget-otaku.github.io/Bookmarklet/%E3%83%A1%E3%83%A2%E5%B8%B3%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%83%BC', '_blank');})();","children":[]}]}, panel);createItem({"name":"ツールパネル","script":"","children":[{"name":"ツールパネル生成＆編集サイト","script":"javascript:(function(){window.open('https://sites.google.com/view/toolpaneleditor/ホーム','_blank');})();","children":[]},{"name":"Github ツールパネル JavaScript","script":"javascript:(function(){window.open('https://github.com/Gadget-Otaku/Bookmarklet/blob/main/%E3%83%84%E3%83%BC%E3%83%AB%E3%83%91%E3%83%8D%E3%83%AB2.1.js', '_blank');})();","children":[]}]}, panel);createItem({"name":"UserScript生成・編集サイト","script":"javascript:(function(){window.open('https://sites.google.com/view/userscriptgenerator/%E3%83%9B%E3%83%BC%E3%83%A0','_blank');})();","children":[]}, panel);createItem({"name":"GreasyFork","script":"javascript:(function(){window.open('https://greasyfork.org/ja/users/1433480-スマホオタクにわか','_blank');})();","children":[]}, panel);createItem({"name":"Github","script":"","children":[{"name":"Githubにアップロード","script":"javascript:(function(){window.open('https://github.com/Gadget-Otaku/Bookmarklet/upload/main','_blank');})();","children":[]},{"name":"HTMLファイル名からURLに飛ぶ","script":"javascript:(function(){\n              if (window._bmUI4) return;\n              window._bmUI4 = true;\n    \n              const style = `\n                #bm4-generator {\n                  position: fixed;\n                  top: 20px;\n                  left: 20px;\n                  background: white;\n                  border: 1px solid #ccc;\n                  padding: 10px;\n                  z-index: 99999;\n                  font-family: sans-serif;\n                  box-shadow: 2px 2px 10px rgba(0,0,0,0.2);\n                }\n                #bm4-generator input {\n                  width: 300px;\n                  padding: 5px;\n                  margin: 5px 0;\n                }\n                #bm4-generator button {\n                  padding: 5px 10px;\n                  margin-right: 5px;\n                }\n                #bm4-close {\n                  position: absolute;\n                  top: 5px;\n                  right: 5px;\n                  cursor: pointer;\n                  font-weight: bold;\n                }\n              `;\n    \n              const html = `\n                <div id=\"bm4-generator\">\n                  <div id=\"bm4-close\">☒</div>\n                  <input id=\"bm4-text\" type=\"text\" placeholder=\"ファイル名 入力欄\" />\n                  <br/>\n                  <button id=\"bm4-search\">検索</button>\n                </div>\n              `;\n    \n              const styleTag = document.createElement('style');\n              styleTag.textContent = style;\n              document.head.appendChild(styleTag);\n    \n              const container = document.createElement('div');\n              container.innerHTML = html;\n              document.body.appendChild(container);\n    \n              const closeUI = () => {\n                container.remove();\n                styleTag.remove();\n                delete window._bmUI4;\n              };\n    \n              document.getElementById('bm4-close').onclick = closeUI;\n    \n              document.getElementById('bm4-search').onclick = () => {\n                const filename = document.getElementById('bm4-text').value.trim();\n                if (!filename) return alert(\"ファイル名を入力してください\");\n                const url = 'https://gadget-otaku.github.io/Bookmarklet/' + encodeURIComponent(filename);\n                window.open(url, '_blank');\n                closeUI();\n              };\n            })();","children":[]},{"name":"Githubファイル一覧","script":"javascript:(function(){window.open('https://github.com/Gadget-Otaku/Bookmarklet', '_blank');})();","children":[]}]}, panel);createItem({"name":"ショートカットパネル","script":"javascript:\n\n(function() {\n    'use strict';\n\n    const config = {\n        scale: 80,\n        gridCols: 5,\n        gridRows: 4,\n        topOffset: 80,\n        leftOffset: -460\n    };\n\n    const items = [\n        {\n            name: \"YouTube\",\n            url: \"https://www.youtube.com\",\n            icon: \"https://images.icon-icons.com/1584/PNG/512/3721679-youtube_108064.png\"\n        },\n        {\n            name: \"X\",\n            url: \"https://x.com/home\",\n            icon: \"https://img.freepik.com/free-vector/new-2023-twitter-logo-x-icon-design_1017-45418.jpg\"\n        },\n        {\n            name: \"ChatGPT\",\n            url: \"https://chatgpt.com/?model=auto\",\n            icon: \"https://i.pinimg.com/736x/a6/8e/fc/a68efcad5debfbe207f52e8c19b379e9.jpg\"\n        },\n        {\n            name: \"DeepSeek\",\n            url: \"https://chat.deepseek.com\",\n            icon: \"https://play-lh.googleusercontent.com/d2zqBFBEymSZKaVg_dRo1gh3hBFn7_Kl9rO74xkDmnJeLgDW0MoJD3cUx0QzZN6jdsg\"\n        },\n        {\n            name: \"Gemini\",\n            url: \"https://gemini.google.com/app?hl=ja\",\n            icon: \"https://asset.watch.impress.co.jp/img/ktw/docs/1583/273/icon_l.jpg\"\n        },\n        {\n            name: \"Astate\",\n            url: \"https://www.astate.edu\",\n            icon: \"https://www.astate.edu/dotAsset/dab6dbb0-0dae-439c-b6d6-1e729565418a.png\"\n        },\n        {\n            name: \"myastate\",\n            url: \"https://www.google.co.jp/search?q=my+astate&sca_esv=e32a4ee67baa3d12&source=hp&ei=HEL8Z6b8Ofbfp84Pq-PYYQ&iflsig=ACkRmUkAAAAAZ_xQLLs8tD15g0E0eziaSiTgodTnMRPa&ved=0ahUKEwim-ri-jtaMAxX278kDHasxNgwQ4dUDCBg&uact=5&oq=my+astate&gs_lp=Egdnd3Mtd2l6IglteSBhc3RhdGUyBRAAGIAEMgQQABgeMgQQABgeMgQQABgeMgQQABgeMgQQABgeMgYQABgKGB4yBBAAGB4yBBAAGB4yBBAAGB5IjixQiQhYnCpwBngAkAEAmAFLoAGtBqoBAjE0uAEDyAEA-AEBmAISoALNBqgCAMICBxAAGIAEGATCAgUQABjvBcICCBAAGIAEGKIEmAMB8QXhEx3SFww8f5IHAjE4oAezIrIHAjE0uAfHBg&sclient=gws-wiz\",\n            icon: \"https://images.icon-icons.com/2631/PNG/512/google_search_new_logo_icon_159150.png\"\n        },\n        {\n            name: \"大学関連\",\n            isFolder: true,\n            children: [\n            {\n                name: \"mybill\",\n                url: \"https://epay.astate.edu/C20019_tsa/web/login.jsp\",\n                icon: \"https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=https://epay.astate.edu/C20019_tsa/web/login.jsp&size=16\"\n            },\n            {\n                name: \"ｽｹｼﾞｭ-ﾙ\",\n                url: \"https://catalog.astate.edu/preview_program.php?catoid=8&poid=2347&returnto=244\",\n                icon: \"https://images.icon-icons.com/2631/PNG/512/google_search_new_logo_icon_159150.png\"\n            }\n        ]\n        },\n        {\n            name: \"Outlook\",\n            url: \"https://outlook.office365.com/mail/\",\n            icon: \"https://cdn.iconscout.com/icon/free/png-256/free-microsoft-outlook-1868952-1583116.png\"\n        },\n        {\n            name: \"Gmail\",\n            url: \"https://mail.google.com/mail/u/1/#inbox\",\n            icon: \"https://img.icons8.com/color/512/gmail-new.png\"\n        },\n        {\n            name: \"Github\",\n            url: \"https://github.com\",\n            icon: \"https://cdn-icons-png.freepik.com/256/733/733609.png\"\n        },\n        {\n            name: \"GreasyFork\",\n            url: \"https://greasyfork.org/ja/users/1433480-%E3%82%B9%E3%83%9E%E3%83%9B%E3%82%AA%E3%82%BF%E3%82%AF%E3%81%AB%E3%82%8F%E3%81%8B\",\n            icon: \"https://files.svgcdn.io/simple-icons/greasyfork.svg\"\n        },\n        {\n            name: \"制作\",\n            isFolder: true,\n            children: [\n            {\n                name: \"ツールパネル\",\n                url: \"https://sites.google.com/view/toolpaneleditor/%E3%83%9B%E3%83%BC%E3%83%A0\",\n                icon: \"https://img.icons8.com/color/512/google-sites--v2.png\"\n            },\n            {\n                name: \"UserScript\",\n                url: \"https://sites.google.com/view/userscriptgenerator/%E3%83%9B%E3%83%BC%E3%83%A0\",\n                icon: \"https://img.icons8.com/color/512/google-sites--v2.png\"\n            },\n            {\n                name: \"site:検索\",\n                url: \"https://sites.google.com/view/site-search-multi-function/%E3%83%9B%E3%83%BC%E3%83%A0\",\n                icon: \"https://img.icons8.com/color/512/google-sites--v2.png\"\n            },\n            {\n                name: \"サイト\",\n                url: \"https://sites.google.com/new?hl=ja\",\n                icon: \"https://img.icons8.com/color/512/google-sites--v2.png\"\n            }\n        ]\n        },\n        {\n            name: \"編集\",\n            url: \"https://sites.google.com/view/homepage-custom-shortcut/%E3%83%9B%E3%83%BC%E3%83%A0\",\n            icon: \"https://icooon-mono.com/i/icon_00001/icon_000010_256.png\"\n        },\n        {\n            name: \"メモ帳2.0\",\n            url: \"https://gadget-otaku.github.io/Bookmarklet/%E3%83%A1%E3%83%A2%E5%B8%B32.0\",\n            icon: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTmsAZYI27WQaMCSK-W8M-1FoW4Tx-0BWk6dA&s\"\n        },\n        {\n            name: \"Notion\",\n            url: \"https://www.notion.so/2f61b782539d4036bef474f820fa42c2\",\n            icon: \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Notion-logo.svg/1024px-Notion-logo.svg.png\"\n        },\n        {\n            name: \"365\",\n            url: \"https://m365.cloud.microsoft/?acctsw=1&auth=1\",\n            icon: \"https://cdn-dynmedia-1.microsoft.com/is/content/microsoftcorp/Icon_Copilot_64x64?resMode=sharp2&op_usm=1.5,0.65,15,0&wid=32&hei=32&qlt=100&fit=constrain\"\n        }\n    ];\n    \n    const urlRules = [\n    {\n        \"url\": \"https://www.google.com/\",\n        \"color\": \"black\"\n    }\n];\n\n    const styleText = `\n      :root {\n        --item-size: 72px;\n        --icon-size: 40px;\n        --folder-size: 40px;\n        --border-radius: 12px;\n      }\n      .panel-style {\n        background: rgba(255, 255, 255, 0.2);\n        backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);\n        border-radius: var(--border-radius);\n        border: 1px solid rgba(255, 255, 255, 0.3);\n        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2), inset 0 1px 1px rgba(255,255,255,0.4);\n        padding: 20px; position: fixed;\n      }\n      .custom-shortcuts-container {\n        transform: scale(${config.scale / 100});\n        transform-origin: top left; display: grid;\n        grid-template-columns: repeat(${config.gridCols}, var(--item-size));\n        grid-template-rows: repeat(${config.gridRows}, var(--item-size));\n        gap: 15px; z-index: 9999; pointer-events: auto; cursor: move;\n      }\n      .panel-controls {\n        position: absolute; top: 8px; right: 8px; display: flex; gap: 8px; cursor: default;\n      }\n      .control-button {\n        width: 16px; height: 16px; border-radius: 50%; display: flex;\n        align-items: center; justify-content: center; font-family: sans-serif;\n        font-size: 12px; line-height: 16px; cursor: pointer; transition: color 0.2s;\n        user-select: none; background-color: rgba(0, 0, 0, 0.7);\n      }\n      .custom-shortcut {\n        display: flex; flex-direction: column; align-items: center; justify-content: center;\n        text-decoration: none; width: var(--item-size); height: var(--item-size);\n        transition: all 0.2s; border-radius: var(--border-radius);\n        padding: 4px; box-sizing: border-box; cursor: pointer;\n      }\n      .custom-shortcut:hover {\n        transform: translateY(-5px); background: rgba(255,255,255,0.3);\n      }\n      .custom-shortcut img, .custom-shortcut .folder-icon-preview {\n        width: var(--icon-size); height: var(--icon-size);\n        object-fit: contain; border-radius: calc(var(--border-radius) * 0.5);\n      }\n      .custom-shortcut span {\n        font-size: 12px; margin-top: 6px; text-align: center;\n        width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\n        transition: color 0.3s;\n      }\n      .light-text .custom-shortcut span, .light-text .control-button { color: white !important; }\n      .dark-text .custom-shortcut span, .dark-text .control-button { color: black !important; }\n      .custom-folder .folder-icon-preview {\n        display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);\n        gap: 2px; padding: 2px; width: var(--folder-size); height: var(--folder-size);\n        background: rgba(0,0,0,0.1); border-radius: var(--border-radius);\n      }\n      .folder-icon-preview .preview-icon {\n        width: 95%; height: 95%; background-size: contain;\n        background-repeat: no-repeat; background-position: center; border-radius: 4px;\n      }\n      .folder-contents-overlay {\n        position: fixed; top: 0; left: 0; width: 100%; height: 100%;\n        background: rgba(0,0,0,0); backdrop-filter: blur(0px); -webkit-backdrop-filter: blur(0px);\n        z-index: 10000; display: flex; align-items: center; justify-content: center;\n        animation: blurFadeIn 0.3s ease-out forwards;\n      }\n      .folder-contents {\n        display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; max-width: 400px;\n        transform: scale(0.8); opacity: 0; animation: scaleUp 0.15s ease-out 0.05s forwards;\n        position: relative;\n      }\n      @keyframes scaleUp { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }\n      @keyframes blurFadeIn { to { background: rgba(0,0,0,0); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px); } }\n      @keyframes blurFadeOut { from { background: rgba(0,0,0,0); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px); } to { background: rgba(0,0,0,0); backdrop-filter: blur(0px); -webkit-backdrop-filter: blur(0px); } }\n      @keyframes scaleDown { from { transform: scale(1); opacity: 1; } to { transform: scale(0.8); opacity: 0; } }\n      .folder-contents-overlay.closing { animation: blurFadeOut 0.3s ease-out forwards; }\n      .folder-contents.closing { animation: scaleDown 0.3s ease-in forwards; }\n    `;\n\n    let isDarkMode = false;\n    const container = document.createElement('div');\n    const controls = document.createElement('div');\n    const toggleModeBtn = document.createElement('div');\n\n    function applyTheme(isDark) {\n        isDarkMode = isDark;\n        container.classList.toggle('dark-text', isDarkMode);\n        container.classList.toggle('light-text', !isDarkMode);\n        toggleModeBtn.textContent = isDarkMode ? '●' : '◯';\n    }\n\n    function createShortcut(item) {\n        const link = document.createElement('a');\n        link.href = item.url;\n        link.className = \"custom-shortcut\";\n        const img = document.createElement('img');\n        try {\n            img.src = item.icon || `https://www.google.com/s2/favicons?sz=64&domain_url=${new URL(item.url).hostname}`;\n        } catch(e) { img.src = ''; }\n        img.alt = item.name;\n        img.onerror = (e) => { e.target.src = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='; };\n        const span = document.createElement('span');\n        span.textContent = item.name;\n        link.appendChild(img);\n        link.appendChild(span);\n        return link;\n    }\n\n    function createFolder(item) {\n        const folder = document.createElement('div');\n        folder.className = \"custom-shortcut custom-folder\";\n        const preview = document.createElement('div');\n        preview.className = 'folder-icon-preview';\n        item.children.slice(0, 9).forEach(child => {\n            if (child.icon) {\n                const iconDiv = document.createElement('div');\n                iconDiv.className = 'preview-icon';\n                iconDiv.style.backgroundImage = `url(${child.icon})`;\n                preview.appendChild(iconDiv);\n            }\n        });\n        const span = document.createElement('span');\n        span.textContent = item.name;\n        folder.appendChild(preview);\n        folder.appendChild(span);\n        folder.addEventListener('click', (e) => {\n            e.stopPropagation();\n            const overlay = document.createElement('div');\n            overlay.className = 'folder-contents-overlay';\n            const contents = document.createElement('div');\n            contents.className = 'folder-contents panel-style';\n            contents.classList.toggle('dark-text', isDarkMode);\n            contents.classList.toggle('light-text', !isDarkMode);\n            item.children.forEach(child => {\n                if (!child.isFolder) { contents.appendChild(createShortcut(child)); }\n            });\n            overlay.appendChild(contents);\n            document.body.appendChild(overlay);\n            overlay.addEventListener('click', (ev) => {\n                if (ev.target === overlay) {\n                    overlay.classList.add('closing');\n                    contents.classList.add('closing');\n                    overlay.addEventListener('animationend', () => overlay.remove(), { once: true });\n                }\n            });\n        });\n        return folder;\n    }\n\n    container.className = \"custom-shortcuts-container panel-style\";\n    controls.className = 'panel-controls';\n    toggleModeBtn.className = 'control-button toggle-mode-btn';\n    const closeBtn = document.createElement('div');\n    closeBtn.className = 'control-button close-btn';\n    closeBtn.textContent = '✕';\n    controls.appendChild(toggleModeBtn);\n    controls.appendChild(closeBtn);\n    container.appendChild(controls);\n\n    toggleModeBtn.addEventListener('click', (e) => { e.stopPropagation(); applyTheme(!isDarkMode); });\n    closeBtn.addEventListener('click', (e) => { e.stopPropagation(); container.style.display = 'none'; });\n\n    items.slice(0, config.gridCols * config.gridRows).forEach(item => {\n        container.appendChild(item.isFolder ? createFolder(item) : createShortcut(item));\n    });\n    \n    function makeDraggableAndPosition(element) {\n        setTimeout(() => {\n            const scale = config.scale / 100;\n            const rect = element.getBoundingClientRect();\n            const containerWidth = rect.width / scale;\n            const initialLeft = (window.innerWidth / 2) + config.leftOffset - (containerWidth / 2);\n            element.style.left = `${initialLeft}px`;\n            element.style.top = `${config.topOffset}px`;\n        }, 0);\n        let startX, startY, startLeft, startTop;\n        element.addEventListener('mousedown', (e) => {\n            if (e.target.closest('.custom-shortcut, .panel-controls')) { return; }\n            e.preventDefault();\n            const scale = config.scale / 100;\n            startX = e.clientX; startY = e.clientY;\n            startLeft = element.offsetLeft; startTop = element.offsetTop;\n            function onMouseMove(e) {\n                element.style.left = `${startLeft + ((e.clientX - startX) / scale)}px`;\n                element.style.top = `${startTop + ((e.clientY - startY) / scale)}px`;\n            }\n            function onMouseUp() {\n                document.removeEventListener('mousemove', onMouseMove);\n                document.removeEventListener('mouseup', onMouseUp);\n            }\n            document.addEventListener('mousemove', onMouseMove);\n            document.addEventListener('mouseup', onMouseUp);\n        });\n    }\n\n    // --- Initialization ---\n    document.body.appendChild(container);\n    makeDraggableAndPosition(container);\n\n    let initialThemeIsDark = false;\n    const currentUrl = window.location.href;\n    let ruleApplied = false;\n\n    if (urlRules && urlRules.length > 0) {\n        for (const rule of urlRules) {\n            if (currentUrl === rule.url) {\n                initialThemeIsDark = (rule.color === 'black');\n                ruleApplied = true;\n                break;\n            }\n        }\n    }\n\n    if (!ruleApplied) {\n        if (currentUrl.endsWith('/1')) { initialThemeIsDark = true; } \n        else if (currentUrl.endsWith('/0')) { initialThemeIsDark = false; }\n    }\n    \n    applyTheme(initialThemeIsDark);\n\n    const styleTag = document.createElement('style');\n    styleTag.textContent = styleText;\n    document.head.appendChild(styleTag);\n})();","children":[]}, panel);createItem({"name":"文字比較","script":"javascript:(function(){window.open('https://difff.jp/','_blank');})();","children":[]}, panel);createItem({"name":"定型文","script":"","children":[{"name":"execommand(copy)定型文","script":"javascript:(function(){const t=document.createElement('textarea');t.value='コピーは必ずexecommand(coppy)を使ってください。';document.body.appendChild(t);t.select();document.execCommand('copy');document.body.removeChild(t);})();","children":[]},{"name":"☒の説明定型文","script":"javascript:(function(){const t=document.createElement('textarea');t.value='☒を押すとウィンドウが非表示になります';document.body.appendChild(t);t.select();document.execCommand('copy');document.body.removeChild(t);})();","children":[]},{"name":"省略せず完成版を作ってほしい","script":"javascript:(function(){const t=document.createElement('textarea');t.value='省略せず、完成版を作ってほしい';document.body.appendChild(t);t.select();document.execCommand('copy');document.body.removeChild(t);})();","children":[]}]}, panel);createItem({"name":"簡易ブックマークレット作成","script":"","children":[{"name":"定型文コピーブックマークレット生成","script":"javascript:(function(){\n              if (window._bmUI3) return;\n              window._bmUI3 = true;\n    \n              const style = `\n                #bm3-generator {\n                  position: fixed;\n                  top: 20px;\n                  left: 20px;\n                  background: white;\n                  border: 1px solid #ccc;\n                  padding: 10px;\n                  z-index: 99999;\n                  font-family: sans-serif;\n                  box-shadow: 2px 2px 10px rgba(0,0,0,0.2);\n                }\n                #bm3-generator input {\n                  width: 300px;\n                  padding: 5px;\n                  margin: 5px 0;\n                }\n                #bm3-generator button {\n                  padding: 5px 10px;\n                  margin-right: 5px;\n                }\n                #bm3-close {\n                  position: absolute;\n                  top: 5px;\n                  right: 5px;\n                  cursor: pointer;\n                  font-weight: bold;\n                }\n              `;\n    \n              const html = `\n                <div id=\"bm3-generator\">\n                  <div id=\"bm3-close\">☒</div>\n                  <input id=\"bm3-text\" type=\"text\" placeholder=\"指定文言 入力欄\" />\n                  <br/>\n                  <button id=\"bm3-copy\">コピー</button>\n                </div>\n              `;\n    \n              const styleTag = document.createElement('style');\n              styleTag.textContent = style;\n              document.head.appendChild(styleTag);\n    \n              const container = document.createElement('div');\n              container.innerHTML = html;\n              document.body.appendChild(container);\n    \n              document.getElementById('bm3-close').onclick = () => {\n                container.remove();\n                styleTag.remove();\n                delete window._bmUI3;\n              };\n    \n              document.getElementById('bm3-copy').onclick = () => {\n                const text = document.getElementById('bm3-text').value;\n                if (!text) return alert(\"文言を入力してください\");\n    \n                const escaped = text.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\");\n                const bookmarklet = `javascript:(function(){const t=document.createElement('textarea');t.value='${escaped}';document.body.appendChild(t);t.select();document.execCommand('copy');document.body.removeChild(t);})();`;\n    \n                const textarea = document.createElement('textarea');\n                textarea.value = bookmarklet;\n                document.body.appendChild(textarea);\n                textarea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textarea);\n                alert(\"文言コピー用のブックマークレットをコピーしました\");\n              };\n            })();","children":[]},{"name":"新しくタブを開くブックマークレット生成","script":"javascript:(function(){\n              if (window._bmUI) return;\n              window._bmUI = true;\n    \n              const style = `\n                #bm-generator {\n                  position: fixed;\n                  top: 20px;\n                  left: 20px;\n                  background: white;\n                  border: 1px solid #ccc;\n                  padding: 10px;\n                  z-index: 99999;\n                  font-family: sans-serif;\n                  box-shadow: 2px 2px 10px rgba(0,0,0,0.2);\n                }\n                #bm-generator input {\n                  width: 300px;\n                  padding: 5px;\n                  margin: 5px 0;\n                }\n                #bm-generator button {\n                  padding: 5px 10px;\n                  margin-right: 5px;\n                }\n                #bm-close {\n                  position: absolute;\n                  top: 5px;\n                  right: 5px;\n                  cursor: pointer;\n                  font-weight: bold;\n                }\n              `;\n    \n              const html = `\n                <div id=\"bm-generator\">\n                  <div id=\"bm-close\">☒</div>\n                  <input id=\"bm-url\" type=\"text\" placeholder=\"URL 入力欄\" />\n                  <br/>\n                  <button id=\"bm-copy\">コピー</button>\n                </div>\n              `;\n    \n              const styleTag = document.createElement('style');\n              styleTag.textContent = style;\n              document.head.appendChild(styleTag);\n    \n              const container = document.createElement('div');\n              container.innerHTML = html;\n              document.body.appendChild(container);\n    \n              document.getElementById('bm-close').onclick = () => {\n                container.remove();\n                styleTag.remove();\n                delete window._bmUI;\n              };\n    \n              document.getElementById('bm-copy').onclick = () => {\n                const url = document.getElementById('bm-url').value.trim();\n                if (!url) return alert(\"URLを入力してください\");\n                const bookmarklet = `javascript:(function(){window.open('${url.replace(/'/g, \"\\\\'\")}', '_blank');})();`;\n    \n                const textarea = document.createElement('textarea');\n                textarea.value = bookmarklet;\n                document.body.appendChild(textarea);\n                textarea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textarea);\n                alert(\"ブックマークレットをコピーしました\");\n              };\n            })();","children":[]}]}, panel);document.addEventListener('click', function(e) {if (!panel.contains(e.target)) {panel.style.display = 'none';}}, { capture: true });})();
